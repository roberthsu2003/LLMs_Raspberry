# 檔案操作教學 – 教師示範指南

本檔案提供教師在課堂上示範「檔案操作」時的完整步驟與詳細說明，涵蓋基礎指令操作、常用參數應用、實務範例與進階技巧。請依序在終端機執行以下指令，並在每個步驟停下來為學生解說指令的目的與預期結果。

---

## 1. 建立空檔案與檢視內容 – 檔案的誕生

```sh
# 建立三個空檔案
touch note.txt diary.md report.log

# 確認檔案已建立
ls -l note.txt diary.md report.log

# 使用 cat 查看空檔案（不會有輸出）
cat note.txt
```

**教學說明**：  
`touch` 指令有兩個主要功能：
- 建立新的空檔案
- 更新既有檔案的時間戳記（存取時間和修改時間）

`cat` (concatenate) 指令用於顯示檔案內容，當檔案為空時不會有任何輸出。

**互動提問**：  
「這三個檔案的副檔名有什麼意義？」、「為什麼空檔案用 `cat` 查看時沒有輸出？」

---

## 2. 檔案內容寫入與追加 – 編輯你的第一份文件

```sh
# 使用重定向寫入（會覆蓋原有內容）
echo "今天的學習筆記" > note.txt

# 檢視寫入結果
cat note.txt

# 使用追加寫入（保留舊內容，往下加）
echo "第二行內容" >> note.txt

# 再次檢視結果
cat note.txt

# 使用 here-document 一次寫入多行
cat <<EOF > diary.md
# 今日學習日誌
2025-12-28 第一次使用 Linux
- 學會建立檔案
- 練習檔案操作指令
- 了解重定向概念
EOF

# 檢視多行寫入結果
cat diary.md
```

**教學說明**：  
- `>` 重定向符號會覆蓋檔案原有內容
- `>>` 重定向符號會在檔案末端追加新內容
- `cat <<EOF` 稱為 here-document，可以一次寫入多行文字，直到遇到單獨的 EOF

**互動提問**：  
「如果我想保留原有內容並加入新內容，應該用哪個符號？」、「here-document 在什麼情況下特別有用？」

---

## 3. 檔案複製操作 – 建立備份保護資料

```sh
# 複製單一檔案
cp note.txt note_backup.txt

# 複製多個檔案到目錄
mkdir backup
cp note.txt diary.md backup/

# 檢視備份目錄內容
ls -l backup/

# 遞迴複製整個目錄（包含子目錄和檔案）
cp -r backup backup_copy

# 檢視複製結果
ls -l backup_copy/
```

**教學說明**：  
`cp` (copy) 指令用於複製檔案和目錄：
- 複製單一檔案：`cp 來源檔 目標檔`
- 複製多個檔案：`cp 檔案1 檔案2 目標目錄/`
- `-r` (recursive) 參數可以遞迴複製整個目錄結構

**互動提問**：  
「如果目標目錄不存在會發生什麼事？」、「為什麼複製目錄需要 `-r` 參數？」

---

## 4. 檔案移動與重新命名 – 整理你的檔案

```sh
# 重新命名檔案
mv report.log final_report.log

# 移動檔案到另一目錄
mv note.txt backup/

# 同時移動並重新命名
mv diary.md backup/diary_2025.md

# 檢視移動結果
ls -l backup/
```

**教學說明**：  
`mv` (move) 指令有兩個功能：
- 重新命名檔案：`mv 舊檔名 新檔名`
- 移動檔案：`mv 檔案 目標目錄/`
- 可以同時執行移動和重新命名

**互動提問**：  
「`mv` 和 `cp` 有什麼不同？」、「如果目標檔案已存在會發生什麼事？」

---

## 5. 檔案刪除與安全操作 – 謹慎清理空間

```sh
# 刪除單一檔案（-i 會詢問確認）
rm -i final_report.log

# 刪除多個檔案
rm note_backup.txt backup/*.md

# 強制刪除（不會詢問，請小心使用）
rm -f *.log

# 遞迴刪除目錄及其內容（危險操作！）
rm -r backup_copy
```

**教學說明**：  
`rm` (remove) 指令用於刪除檔案和目錄：
- `-i` (interactive) 在刪除前提示確認
- `-f` (force) 強制刪除，不提示
- `-r` (recursive) 遞迴刪除目錄及其內容
- **重要**：`rm -rf` 是非常危險的指令，使用前務必確認路徑

**互動提問**：  
「為什麼 `rm` 指令被認為是危險的？」、「如何安全地刪除檔案？」

---

## 6. 進階檔案檢視技巧 – 閱讀長文件的方法

```sh
# 逐頁檢視（適合長檔案）
less diary.md

# 顯示行號檢視
nl -ba diary.md

# 只顯示前 10 行
head -n 10 diary.md

# 只顯示後 10 行
tail -n 10 diary.md

# 監看日誌檔案的新增內容（實用技巧）
tail -f /var/log/syslog
```

**教學說明**：  
- `less` 支援上下捲動、搜尋功能，適合閱讀長檔案
- `head` 顯示檔案開頭部分
- `tail` 顯示檔案結尾部分
- `tail -f` (follow) 持續監看檔案的新增內容，常用於監控日誌檔

**互動提問**：  
「什麼情況下會使用 `tail -f`？」、「如何快速查看大檔案的前幾行？」

---

## 7. 文字編輯器實戰 – 選擇你的編輯工具

```sh
# 使用 nano 編輯器（簡易、直觀）
nano note.txt

# 使用 vim 編輯器（功能強大，適合進階使用者）
vim diary.md
```

**教學說明**：  
**nano 特點**：
- 介面友好，底部顯示常用快捷鍵
- 適合初學者快速上手
- 基本功能：Ctrl+O 儲存，Ctrl+X 離開

**vim 特點**：
- 功能強大，支援大量快捷鍵和插件
- 學習曲線較陡，但效率極高
- 建議使用 `vimtutor` 學習基礎操作

**互動提問**：  
「初學者應該選擇哪個編輯器？」、「vim 有什麼特別的優點？」

---

## 8. 進階範例：管道與重定向的強大組合

```sh
# 取得目前目錄下的 .md 檔，排序後寫入清單
ls *.md | sort > markdown_list.txt

# 用 grep 找出包含「Linux」的行，並寫入新檔
grep -i "linux" diary.md > linux_mentions.txt

# 使用 awk 只保留第一欄（檔名），再寫入檔案
awk '{print $1}' markdown_list.txt > filenames_only.txt

# 組合多個指令：找出所有 .txt 檔，排序，顯示前 5 個
ls *.txt | sort | head -n 5
```

**教學說明**：  
- 管道 `|` 將一個指令的輸出傳給下一個指令
- 重定向 `>` 將輸出寫入檔案
- `grep` 用於文字搜尋
- `awk` 是強大的文字處理工具

**互動提問**：  
「管道和重定向有什麼不同？」、「如何組合多個指令完成複雜任務？」

---

## 9. 實務應用：建立專案文件結構

```sh
# 建立專案目錄和檔案
mkdir -p my_project/{docs,src,tests}

# 建立 README 檔案
cat <<EOF > my_project/README.md
# My Project

## 簡介
這是一個練習用的專案。

## 功能
- 檔案操作練習
- 目錄結構建立
- 文件撰寫

## 作者
Student Name
EOF

# 建立設定檔
echo "DEBUG=True" > my_project/config.txt

# 檢視專案結構
tree my_project/
```

**教學說明**：  
這個範例展示如何快速建立一個完整的專案結構，包括目錄建立、檔案寫入和結構檢視。

**互動提問**：  
「一個標準的專案應該包含哪些檔案？」、「README.md 的作用是什麼？」

---

## 10. 教學重點回顧

### 核心指令
- **`touch`**：建立空檔案或更新時間戳記
- **`echo`**：輸出文字，配合重定向寫入檔案
- **`cat`**：顯示檔案內容
- **`cp`**：複製檔案和目錄
- **`mv`**：移動或重新命名檔案
- **`rm`**：刪除檔案和目錄
- **`less` / `head` / `tail`**：檢視檔案內容

### 常用參數
- `cp -r`：遞迴複製
- `rm -i`：互動式刪除
- `rm -f`：強制刪除
- `head -n`：顯示前 N 行
- `tail -n`：顯示後 N 行

### 重要概念
- **重定向**：`>` 覆蓋寫入，`>>` 追加寫入
- **管道**：`|` 連接多個指令
- **萬用字元**：`*` 匹配任意字元

---

## 11. 常見問題預判

### Q1: 檔案刪除後能恢復嗎？
**A**: 一般情況下不能，Linux 沒有回收筒機制。建議使用 `rm -i` 或在刪除前先備份。

### Q2: 如何一次建立多個檔案？
**A**: 使用 `touch file1.txt file2.txt file3.txt` 或搭配萬用字元。

### Q3: `cp` 和 `mv` 有什麼區別？
**A**: `cp` 複製檔案（原始檔保留），`mv` 移動檔案（原始檔不保留）。

### Q4: 如何查看隱藏檔案？
**A**: 使用 `ls -a`，隱藏檔案以 `.` 開頭。

---

**教學提醒**：  
檔案操作是 Linux 系統管理的基礎技能，請確保學生充分練習每個指令，並理解其安全注意事項。特別強調 `rm` 指令的危險性，建議初學者總是使用 `-i` 參數。祝教學順利！