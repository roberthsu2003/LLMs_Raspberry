å°‡æ¨¹è“æ´¾ï¼ˆRaspberry Piï¼‰è®Šæˆä¸€å€‹ç°¡å–®çš„ Web Server æ˜¯ä¸€é …éå¸¸ç¶“å…¸ä¸”æœ‰è¶£çš„å¯¦ä½œã€‚è¦é¡¯ç¤ºç°¡å–®çš„ HTMLã€CSS å’Œ JavaScriptï¼Œæœ€æ¨è–¦ä¸”æœ€ç©©å®šçš„æ–¹å¼æ˜¯ä½¿ç”¨ **Apache** æˆ– **Nginx**ã€‚

ä½¿ç”¨ **Nginx** ä¾†æ¶è¨­web serverï¼Œå› ç‚ºå®ƒè¼•é‡ã€æ•ˆèƒ½é«˜ï¼Œéå¸¸é©åˆåœ¨æ¨¹è“æ´¾ä¸Šé‹è¡Œã€‚

> ğŸ’¡ **å­¸ç¿’ç›®æ¨™**ï¼šå®Œæˆæœ¬æŒ‡å—å¾Œï¼Œä½ å°‡èƒ½å¤ ï¼š
> - åœ¨æ¨¹è“æ´¾ä¸Šå®‰è£ä¸¦å•Ÿå‹• Nginx
> - å»ºç«‹ä¸¦éƒ¨ç½²ä½ çš„ç¬¬ä¸€å€‹ç¶²é 
> - é…ç½® Nginx æœå‹™å¤šå€‹ç¶²ç«™
> - è§£æ±ºå¸¸è¦‹çš„è¨­å®šå•é¡Œ

---

## ğŸš€ å¿«é€Ÿé–‹å§‹ï¼ˆ10 åˆ†é˜å®Œæˆç¬¬ä¸€å€‹ç¶²ç«™ï¼‰

å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡æ¶è¨­ Web Serverï¼Œå»ºè­°å…ˆå®Œæˆé€™å€‹å¿«é€Ÿé–‹å§‹ï¼Œå»ºç«‹ä¿¡å¿ƒå¾Œå†æ·±å…¥äº†è§£é€²éšè¨­å®šã€‚

### æ­¥é©Ÿ 1ï¼šæ›´æ–°ç³»çµ±

```bash
# åœ¨æ¨¹è“æ´¾ä¸ŠåŸ·è¡Œ
sudo apt update
sudo apt upgrade -y
```

**ğŸ’¡ æç¤ºï¼š** é€™å¯èƒ½éœ€è¦å¹¾åˆ†é˜ï¼Œè«‹è€å¿ƒç­‰å¾…ã€‚

### æ­¥é©Ÿ 2ï¼šå®‰è£ Nginx

```bash
# å®‰è£ Nginx
sudo apt install nginx -y
```

**é©—è­‰å®‰è£ï¼š**
```bash
# æª¢æŸ¥ Nginx ç‰ˆæœ¬
nginx -v
# æ‡‰è©²é¡¯ç¤ºï¼šnginx version: nginx/1.x.x
```

### æ­¥é©Ÿ 3ï¼šå•Ÿå‹• Nginx

```bash
# å•Ÿå‹• Nginx
sudo systemctl start nginx

# è¨­å®šé–‹æ©Ÿè‡ªå‹•å•Ÿå‹•
sudo systemctl enable nginx

# æª¢æŸ¥ç‹€æ…‹
sudo systemctl status nginx
```

**âœ… æˆåŠŸæ¨™èªŒï¼š** çœ‹åˆ° `active (running)` è¡¨ç¤ºæˆåŠŸï¼

### æ­¥é©Ÿ 4ï¼šæ¸¬è©¦ä¼ºæœå™¨

```bash
# æŸ¥çœ‹æ¨¹è“æ´¾ IP ä½å€
hostname -I
# è¨˜ä¸‹é¡¯ç¤ºçš„ IPï¼Œä¾‹å¦‚ï¼š192.168.1.100
```

**åœ¨ç€è¦½å™¨ä¸­è¨ªå•ï¼š** `http://[ä½ çš„æ¨¹è“æ´¾IP]`

**æ‡‰è©²çœ‹åˆ°ï¼š** "Welcome to nginx!" çš„æ­¡è¿é é¢ ğŸ‰

### æ­¥é©Ÿ 5ï¼šå»ºç«‹ä½ çš„ç¬¬ä¸€å€‹ç¶²é 

```bash
# é€²å…¥ç¶²é ç›®éŒ„
cd /var/www/html

# åˆªé™¤é è¨­é é¢ï¼ˆå¯é¸ï¼‰
sudo rm index.nginx-debian.html

# å»ºç«‹ä½ çš„ç¶²é 
sudo nano index.html
```

**åœ¨ç·¨è¼¯å™¨ä¸­è¼¸å…¥ä»¥ä¸‹å…§å®¹ï¼š**
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>æˆ‘çš„ç¬¬ä¸€å€‹ç¶²ç«™</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 50px;
        }
        h1 { font-size: 48px; margin-bottom: 20px; }
        p { font-size: 24px; }
    </style>
</head>
<body>
    <h1>ğŸ‰ æˆ‘çš„æ¨¹è“æ´¾ä¼ºæœå™¨</h1>
    <p>é€™æ˜¯æˆ‘å»ºç«‹çš„ç¬¬ä¸€å€‹ç¶²ç«™ï¼</p>
    <p id="demo">JavaScript æ¸¬è©¦ä¸­...</p>
    <button onclick="changeText()" style="padding: 10px 20px; font-size: 18px; cursor: pointer;">
        é»æˆ‘æ¸¬è©¦ JavaScript
    </button>
    
    <script>
        function changeText() {
            document.getElementById("demo").innerHTML = "âœ… JavaScript é‹ä½œæ­£å¸¸ï¼";
        }
    </script>
</body>
</html>
```

**å„²å­˜ä¸¦é›¢é–‹ï¼š**
- æŒ‰ `Ctrl + O` å­˜æª”
- æŒ‰ `Enter` ç¢ºèª
- æŒ‰ `Ctrl + X` é›¢é–‹

### æ­¥é©Ÿ 6ï¼šé©—è­‰ä½ çš„ç¶²ç«™ âœ…

1. åœ¨ç€è¦½å™¨ä¸­é‡æ–°è¼‰å…¥ï¼š`http://[ä½ çš„æ¨¹è“æ´¾IP]`
2. ä½ æ‡‰è©²çœ‹åˆ°ä½ å»ºç«‹çš„ç¶²é ï¼
3. é»æ“ŠæŒ‰éˆ•æ¸¬è©¦ JavaScript åŠŸèƒ½

> ğŸ‰ **æ­å–œï¼** ä½ å·²ç¶“æˆåŠŸæ¶è¨­äº†ç¬¬ä¸€å€‹ç¶²ç«™ï¼

---

## ğŸ“š æ·±å…¥äº†è§£ Nginx

### ä»€éº¼æ˜¯ Nginxï¼Ÿ

Nginx (ç™¼éŸ³ç‚º "Engine-X") æ˜¯ä¸€å€‹é«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†ä¼ºæœå™¨ã€‚å®ƒä»¥ã€Œäº‹ä»¶é©…å‹•ï¼ˆEvent-drivenï¼‰ã€çš„æ¶æ§‹èåï¼Œé€™æ„å‘³è‘—å®ƒå¯ä»¥ç”¨éå¸¸å°‘çš„è¨˜æ†¶é«”è³‡æºè™•ç†å¤§é‡çš„é€£ç·šï¼Œéå¸¸é©åˆç¡¬é«”è³‡æºæœ‰é™çš„æ¨¹è“æ´¾ã€‚

### æ ¸å¿ƒåŠŸèƒ½èˆ‡å„ªå‹¢
1.  **é«˜ä½µç™¼è™•ç†**ï¼šç›¸æ¯”å‚³çµ±çš„ Apacheï¼ŒNginx åœ¨è™•ç†å¤§é‡åŒæ™‚é€£ç·šæ™‚è¡¨ç¾æ›´å„ªç•°ã€‚
2.  **åå‘ä»£ç† (Reverse Proxy)**ï¼šå¯ä»¥ä½œç‚ºå‰ç«¯ä¼ºæœå™¨ï¼Œå°‡æµé‡è½‰ç™¼çµ¦å¾Œç«¯çš„æ‡‰ç”¨ç¨‹å¼ï¼ˆå¦‚ Node.js, Python Flask/Djangoï¼‰ã€‚
3.  **è² è¼‰å‡è¡¡ (Load Balancing)**ï¼šå¦‚æœæœ‰æœå‹™é›†ç¾¤ï¼ŒNginx å¯ä»¥å”åŠ©åˆ†é…æµé‡ã€‚
4.  **éœæ…‹æª”æ¡ˆæœå‹™**ï¼šè™•ç†åœ–ç‰‡ã€CSSã€JS ç­‰éœæ…‹æª”æ¡ˆçš„é€Ÿåº¦æ¥µå¿«ã€‚

---

---

## ğŸ® Nginx æ§åˆ¶æŒ‡ä»¤ï¼ˆå¸¸ç”¨æ“ä½œï¼‰

é€™äº›æ˜¯ç®¡ç† Nginx æœ€å¸¸ç”¨çš„æŒ‡ä»¤ï¼Œå»ºè­°è¨˜ä¸‹ä¾†ï¼š

```bash
# å•Ÿå‹• Nginx
sudo systemctl start nginx

# åœæ­¢ Nginx
sudo systemctl stop nginx

# é‡æ–°å•Ÿå‹• Nginxï¼ˆæœƒä¸­æ–·é€£ç·šï¼‰
sudo systemctl restart nginx

# é‡æ–°è¼‰å…¥ Nginxï¼ˆä¸ä¸­æ–·é€£ç·šï¼Œæ¨è–¦ï¼‰
sudo systemctl reload nginx

# æŸ¥çœ‹ Nginx ç‹€æ…‹
sudo systemctl status nginx

# è¨­å®šé–‹æ©Ÿè‡ªå‹•å•Ÿå‹•
sudo systemctl enable nginx

# å–æ¶ˆé–‹æ©Ÿè‡ªå‹•å•Ÿå‹•
sudo systemctl disable nginx

# æ¸¬è©¦è¨­å®šæª”èªæ³•ï¼ˆä¿®æ”¹è¨­å®šå‰å¿…åšï¼ï¼‰
sudo nginx -t
```

**ğŸ’¡ ä½¿ç”¨æ™‚æ©Ÿï¼š**
- ä¿®æ”¹è¨­å®šæª”å¾Œï¼šä½¿ç”¨ `reload`ï¼ˆä¸æœƒä¸­æ–·ç¾æœ‰é€£ç·šï¼‰
- é‡åˆ°å•é¡Œæ™‚ï¼šä½¿ç”¨ `restart`ï¼ˆå®Œå…¨é‡å•Ÿï¼‰
- ä¿®æ”¹è¨­å®šå‰ï¼šå…ˆåŸ·è¡Œ `nginx -t` æª¢æŸ¥èªæ³•

---

## ğŸ“ å¯¦éš›æ“ä½œç·´ç¿’

### ç·´ç¿’ 1ï¼šéƒ¨ç½²ç¯„ä¾‹å°ˆæ¡ˆ

å¦‚æœä½ æœ‰ [1_javascript](../1_javascript/README.md) ç¯„ä¾‹å°ˆæ¡ˆï¼Œå¯ä»¥é€™æ¨£éƒ¨ç½²ï¼š

```bash
# æ­¥é©Ÿ 1ï¼šä¸Šå‚³å°ˆæ¡ˆåˆ°æ¨¹è“æ´¾ï¼ˆåœ¨ä½ çš„é›»è…¦ä¸ŠåŸ·è¡Œï¼‰
cd å‰ç«¯é–‹ç™¼ç’°å¢ƒé…ç½®/1_javascript
scp -r public pi@[æ¨¹è“æ´¾IP]:/home/pi/my-website

# æ­¥é©Ÿ 2ï¼šåœ¨æ¨¹è“æ´¾ä¸Šè¨­å®š Nginx
ssh pi@[æ¨¹è“æ´¾IP]
sudo nano /etc/nginx/sites-available/default
```

ä¿®æ”¹ `root` é€™ä¸€è¡Œï¼š
```nginx
root /home/pi/my-website/public;
```

```bash
# æ­¥é©Ÿ 3ï¼šæ¸¬è©¦ä¸¦é‡æ–°è¼‰å…¥
sudo nginx -t
sudo systemctl reload nginx
```

**é©—è­‰ï¼š** åœ¨ç€è¦½å™¨ä¸­è¨ªå• `http://[æ¨¹è“æ´¾IP]`ï¼Œæ‡‰è©²çœ‹åˆ°ç¯„ä¾‹å°ˆæ¡ˆçš„ç¶²é ï¼

### ç·´ç¿’ 2ï¼šå»ºç«‹å¤šå€‹ç¶²ç«™

åƒè€ƒä¸‹æ–¹çš„ã€Œè¨­å®šç¬¬äºŒå€‹ç¶²ç«™ã€ç« ç¯€ï¼Œå˜—è©¦åœ¨åŒä¸€å°æ¨¹è“æ´¾ä¸Šé‹è¡Œå…©å€‹ä¸åŒçš„ç¶²ç«™ã€‚

---

## ğŸ“– Nginx è¨­å®šæª”çµæ§‹èªªæ˜

> ğŸ’¡ **åˆå­¸è€…æç¤º**ï¼šå¦‚æœä½ åªæ˜¯æƒ³å¿«é€Ÿå»ºç«‹ç¶²ç«™ï¼Œå¯ä»¥å…ˆè·³éé€™å€‹ç« ç¯€ï¼Œç›´æ¥ä½¿ç”¨é è¨­è¨­å®šã€‚ç­‰ç†Ÿæ‚‰åŸºæœ¬æ“ä½œå¾Œï¼Œå†å›ä¾†å­¸ç¿’é€²éšè¨­å®šã€‚

Nginx çš„å¼·å¤§ä¾†è‡ªæ–¼å…¶éˆæ´»çš„è¨­å®šæª”ã€‚äº†è§£å…¶çµæ§‹å°æœªä¾†é€²è¡Œé€²éšè¨­å®šï¼ˆå¦‚ç¶å®šç¶²åŸŸã€HTTPSï¼‰éå¸¸é‡è¦ã€‚

### ä¸»è¦è¨­å®šæª”ä½ç½®

*   **ä¸»è¨­å®šæª”**ï¼š`/etc/nginx/nginx.conf` (å…¨åŸŸè¨­å®š)
    - é€šå¸¸ä¸éœ€è¦ä¿®æ”¹ï¼Œé™¤éè¦èª¿æ•´æ•ˆèƒ½æˆ–é€²éšåŠŸèƒ½
    
*   **ç«™é»è¨­å®šæª”**ï¼š
    - `/etc/nginx/sites-available/` (å­˜æ”¾æ‰€æœ‰è¨­å®šæª”)
    - `/etc/nginx/sites-enabled/` (å­˜æ”¾å·²å•Ÿç”¨çš„è¨­å®šæª”)
    - é€™æ˜¯æˆ‘å€‘ä¸»è¦ä¿®æ”¹çš„åœ°æ–¹ï¼

### è¨­å®šæª”å±¤ç´šçµæ§‹ï¼ˆç°¡åŒ–èªªæ˜ï¼‰

Nginx è¨­å®šæª”ç”±ã€Œå€å¡Š (Block)ã€çµ„æˆï¼Œå°±åƒä¿„ç¾…æ–¯å¨ƒå¨ƒä¸€æ¨£ï¼Œä¸€å±¤åŒ…ä¸€å±¤ï¼š

```
http {                    â† æœ€å¤–å±¤ï¼šHTTP ç›¸é—œè¨­å®š
    server {               â† ä¸­å±¤ï¼šä¸€å€‹ç¶²ç«™çš„è¨­å®š
        location / {       â† å…§å±¤ï¼šç‰¹å®šè·¯å¾‘çš„è™•ç†è¦å‰‡
            ...
        }
    }
}
```

**å¯¦éš›ç¯„ä¾‹ï¼š**
```nginx
# é€™æ˜¯ä¸€å€‹å®Œæ•´çš„ç¶²ç«™è¨­å®šç¯„ä¾‹
server {
    # ç›£è½ 80 ç«¯å£ï¼ˆHTTP æ¨™æº–ç«¯å£ï¼‰
    listen 80;
    
    # ç¶²ç«™æª”æ¡ˆçš„ä½ç½®
    root /var/www/html;
    
    # é è¨­é¦–é æª”æ¡ˆ
    index index.html;
    
    # è™•ç†æ‰€æœ‰è«‹æ±‚
    location / {
        try_files $uri $uri/ /index.html;
    }
}
```

**ğŸ’¡ åˆå­¸è€…åªéœ€è¦çŸ¥é“ï¼š**
- `root`ï¼šä½ çš„ç¶²ç«™æª”æ¡ˆæ”¾åœ¨å“ªè£¡
- `index`ï¼šé¦–é æª”æ¡ˆå«ä»€éº¼åå­—
- `location /`ï¼šè™•ç†æ‰€æœ‰ç¶²å€è«‹æ±‚çš„è¦å‰‡

### å¸¸ç”¨æŒ‡ä»¤é€ŸæŸ¥ï¼ˆåˆå­¸è€…å¿…è¨˜ï¼‰

| æŒ‡ä»¤ | èªªæ˜ | ç¯„ä¾‹ | ä½•æ™‚ä½¿ç”¨ |
| :--- | :--- | :--- | :--- |
| `listen` | ç›£è½çš„ç«¯å£ | `listen 80;` | è¨­å®šç¶²ç«™ä½¿ç”¨çš„ç«¯å£ |
| `server_name` | ç¶²åŸŸåç¨± | `server_name _;` | ç¶å®šåŸŸåï¼ˆ`_` è¡¨ç¤ºæ‰€æœ‰åŸŸåï¼‰ |
| `root` | ç¶²ç«™æª”æ¡ˆä½ç½® | `root /var/www/html;` | **æœ€å¸¸ç”¨ï¼** æŒ‡å®šç¶²ç«™è³‡æ–™å¤¾ |
| `index` | é¦–é æª”æ¡ˆåç¨± | `index index.html;` | æŒ‡å®šé¦–é æª”æ¡ˆ |
| `try_files` | æª”æ¡ˆå°‹æ‰¾è¦å‰‡ | `try_files $uri $uri/ /index.html;` | è™•ç†æ‰¾ä¸åˆ°æª”æ¡ˆçš„æƒ…æ³ |

**ğŸ’¡ åˆå­¸è€…åªéœ€è¦è¨˜ä½ `root` å’Œ `index` å°±å¤ äº†ï¼**

---

## Nginx éœæ…‹ç¶²é éƒ¨ç½²è¨­å®šï¼šé è¨­ç›®éŒ„ vs è‡ªè¨‚ç›®éŒ„

åœ¨é…ç½® Nginx serving éœæ…‹æª”æ¡ˆæ™‚ï¼Œä¸»è¦æœ‰å…©ç¨®æª”æ¡ˆæ”¾ç½®ç­–ç•¥ï¼š

### 1. ä½¿ç”¨é è¨­ç›®éŒ„ (Default Directory)
Nginx å®‰è£å¾Œæœƒé è¨­ä¸€å€‹ç¶²é æ ¹ç›®éŒ„ï¼Œé€šå¸¸ä½æ–¼ `/var/www/html`ã€‚

*   **ç‰¹é»**ï¼š
    *   **å¿«é€Ÿä¸Šæ‰‹**ï¼šç„¡éœ€ä¿®æ”¹ Nginx çš„ä¸»è¦è¨­å®šæª”ï¼Œæœå‹™å•Ÿå‹•å³å¯çœ‹åˆ°å…§å®¹ã€‚
    *   **çµæ§‹å–®ç´”**ï¼šé©åˆå–®ä¸€å°ˆæ¡ˆæˆ–æ˜¯å‰›é–‹å§‹å­¸ç¿’ä¼ºæœå™¨éƒ¨ç½²æ™‚ä½¿ç”¨ã€‚
*   **æ“ä½œæ–¹å¼**ï¼šå¦‚ä¸Šè¿°ã€Œç¬¬å››æ­¥ã€æ‰€ç¤ºï¼Œç›´æ¥å°‡æª”æ¡ˆæ”¾å…¥ `/var/www/html` å³å¯ã€‚

### 2. ä½¿ç”¨è‡ªè¨‚ç›®éŒ„ (Custom Directory)
å¯¦éš›é–‹ç™¼ä¸­ï¼Œæˆ‘å€‘é€šå¸¸æœƒå¸Œæœ›å°‡ç¶²ç«™æª”æ¡ˆæ”¾åœ¨è‡ªå·±è¦åŠƒçš„å°ˆæ¡ˆè·¯å¾‘ä¸‹ï¼ˆä¾‹å¦‚ `/home/pi/projects/my-web`ï¼‰ï¼Œè€Œä¸æ˜¯ç³»çµ±é è¨­è·¯å¾‘ã€‚

*   **ç‰¹é»**ï¼š
    *   **ç®¡ç†éˆæ´»**ï¼šå¯ä»¥å°‡ä¸åŒå°ˆæ¡ˆåˆ†é–‹ç®¡ç†ï¼Œä¾¿æ–¼ç‰ˆæœ¬æ§åˆ¶ï¼ˆGitï¼‰èˆ‡å‚™ä»½ã€‚
    *   **å¤šç«™é»æ”¯æ´**ï¼šé€éè¨­å®šä¸åŒçš„ `server` blockï¼Œå¯ä»¥åœ¨åŒä¸€å°ä¼ºæœå™¨ä¸ŠåŒæ™‚é‹è¡Œå¤šå€‹ç¶²ç«™ã€‚

*   **Nginx è¨­å®šæª”æ¶æ§‹èªªæ˜**ï¼š
    
    åœ¨äº†è§£å¦‚ä½•ä¿®æ”¹è¨­å®šä¹‹å‰ï¼Œå…ˆèªè­˜ Nginx çš„å…©ç¨®è¨­å®šæª”é¡å‹ï¼š

    **ğŸ¯ ä¸»è¨­å®šæª” (`/etc/nginx/nginx.conf`)**ï¼š
    - **æ¯”å–»**ï¼šå°±åƒä¸€é–“é¤å»³çš„ã€Œç¸½ç®¡ç†è¦å‰‡æ‰‹å†Šã€ï¼Œå®šç¾©æ•´é–“é¤å»³çš„é‹ä½œåŸå‰‡
    - **åŠŸèƒ½**ï¼šè¨­å®š Nginx çš„å…¨åŸŸåƒæ•¸ï¼Œä¾‹å¦‚ï¼š
        - å·¥ä½œé€²ç¨‹æ•¸é‡ï¼ˆ`worker_processes`ï¼‰
        - è¨˜éŒ„æª”ä½ç½®ï¼ˆ`error_log`ã€`access_log`ï¼‰
        - ç³»çµ±å±¤ç´šçš„è¨­å®š
    - **ç‰¹é»**ï¼šé€šå¸¸ä¸éœ€è¦é »ç¹ä¿®æ”¹ï¼Œé™¤éè¦èª¿æ•´ä¼ºæœå™¨æ•ˆèƒ½æˆ–é€²éšåŠŸèƒ½
    - **æƒ…å¢ƒ**ï¼šå°±åƒé¤å»³è¦å®šã€Œæ‰€æœ‰å“¡å·¥éƒ½è¦éµå®ˆè¡›ç”Ÿæ¨™æº–ã€ã€ã€Œæ¯æ¡Œæœå‹™æ™‚é–“ä¸è¶…é30åˆ†é˜ã€é€™é¡å…¨é¤å»³é€šç”¨çš„è¦å‰‡

    **ğŸ“‹ ç«™é»è¨­å®šæª” (`/etc/nginx/sites-available/` ç›®éŒ„ä¸‹çš„æª”æ¡ˆ)**ï¼š
    - **æ¯”å–»**ï¼šå°±åƒæ¯å€‹ã€Œåˆ†åº—çš„ç‡Ÿé‹æ‰‹å†Šã€ï¼Œå®šç¾©æ¯å€‹ç¶²ç«™çš„å…·é«”é‹ä½œæ–¹å¼
    - **åŠŸèƒ½**ï¼šè¨­å®šç‰¹å®šç¶²ç«™çš„åƒæ•¸ï¼Œä¾‹å¦‚ï¼š
        - ç¶²ç«™æª”æ¡ˆçš„ä½ç½®ï¼ˆ`root`ï¼‰
        - ç›£è½çš„ç«¯å£ï¼ˆ`listen`ï¼‰
        - ç¶²åŸŸåç¨±ï¼ˆ`server_name`ï¼‰
        - ç¶²ç«™çš„è™•ç†è¦å‰‡ï¼ˆ`location` blocksï¼‰
    - **ç‰¹é»**ï¼šæ¯å€‹ç¶²ç«™å¯ä»¥æœ‰ç¨ç«‹çš„è¨­å®šæª”ï¼Œä¾¿æ–¼ç®¡ç†å¤šå€‹ç¶²ç«™
    - **æƒ…å¢ƒ**ï¼šå°±åƒ A åˆ†åº—è¦å®šã€Œæˆ‘å€‘çš„æ‹›ç‰Œèœå–®åœ¨é€™å€‹æ–‡ä»¶å¤¾è£¡ã€ã€ã€Œé¡§å®¢å¾80è™Ÿé–€é€²å…¥ã€ï¼Œè€Œ B åˆ†åº—å¯èƒ½æœ‰ä¸åŒçš„è¦å‰‡
    
    **ğŸ“‚ æª”æ¡ˆçµæ§‹**ï¼š
    ```
    /etc/nginx/
    â”œâ”€â”€ nginx.conf                    # ä¸»è¨­å®šæª”ï¼ˆç¸½è¦å‰‡ï¼‰
    â”œâ”€â”€ sites-available/              # å¯ç”¨çš„ç«™é»è¨­å®šæª”ï¼ˆæ‰€æœ‰åˆ†åº—æ‰‹å†Šï¼‰
    â”‚   â”œâ”€â”€ default                   # é è¨­ç«™é»ï¼ˆä¸»è¦åˆ†åº—ï¼‰
    â”‚   â””â”€â”€ my-website                # è‡ªè¨‚ç«™é»ï¼ˆå¦ä¸€é–“åˆ†åº—ï¼‰
    â””â”€â”€ sites-enabled/                # å•Ÿç”¨çš„ç«™é»è¨­å®šæª”ï¼ˆæ­£åœ¨ç‡Ÿæ¥­çš„åˆ†åº—ï¼‰
        â””â”€â”€ default -> ../sites-available/default  # ç¬¦è™Ÿé€£çµ
    ```
    
    **ğŸ’¡ å·¥ä½œæµç¨‹**ï¼š
    1. åœ¨ `sites-available/` ä¸­å»ºç«‹æˆ–ç·¨è¼¯ç«™é»è¨­å®šæª”ï¼ˆå°±åƒå¯«å¥½åˆ†åº—æ‰‹å†Šï¼‰
    2. å»ºç«‹ç¬¦è™Ÿé€£çµåˆ° `sites-enabled/` ä¾†å•Ÿç”¨ç¶²ç«™ï¼ˆå°±åƒæŠŠåˆ†åº—æ‰‹å†Šæ”¾åˆ°ã€Œæ­£åœ¨ç‡Ÿæ¥­ã€è³‡æ–™å¤¾ï¼‰
    3. æ¸¬è©¦è¨­å®šï¼š`sudo nginx -t`ï¼ˆæª¢æŸ¥æ‰‹å†Šæœ‰æ²’æœ‰éŒ¯èª¤ï¼‰
    4. é‡æ–°è¼‰å…¥ï¼š`sudo systemctl reload nginx`ï¼ˆè®“æ–°è¦å‰‡ç”Ÿæ•ˆï¼‰

*   **å¯¦éš›æ“ä½œæ­¥é©Ÿ**ï¼š

    å‡è¨­ä½ æƒ³æŠŠç¶²ç«™æ”¾åœ¨ `/home/pi/my-website`ï¼š

    1. **ç·¨è¼¯è¨­å®šæª”ï¼š**
       ```bash
       sudo nano /etc/nginx/sites-available/default
       ```

    2. **æ‰¾åˆ°ä¸¦ä¿®æ”¹ `root` é€™ä¸€è¡Œï¼š**
       
       åŸæœ¬å¯èƒ½æ˜¯ï¼š
       ```nginx
       root /var/www/html;
       ```
       
       æ”¹æˆï¼š
       ```nginx
       root /home/pi/my-website;
       ```

    3. **å„²å­˜ä¸¦é›¢é–‹ï¼š**
       - `Ctrl + O` å­˜æª”
       - `Enter` ç¢ºèª
       - `Ctrl + X` é›¢é–‹

    4. **æ¸¬è©¦è¨­å®šæª”ï¼š**
       ```bash
       sudo nginx -t
       ```
       çœ‹åˆ° `syntax is ok` è¡¨ç¤ºæˆåŠŸï¼

    5. **é‡æ–°è¼‰å…¥ Nginxï¼š**
       ```bash
       sudo systemctl reload nginx
       ```

    6. **é©—è­‰ï¼š** åœ¨ç€è¦½å™¨ä¸­è¨ªå• `http://[æ¨¹è“æ´¾IP]`ï¼Œæ‡‰è©²çœ‹åˆ°ä½ çš„ç¶²ç«™ï¼

    **å®Œæ•´è¨­å®šæª”ç¯„ä¾‹ï¼š**
       ```nginx
       server {
           # ç›£è½ 80 ç«¯å£ï¼ˆHTTP æ¨™æº–ç«¯å£ï¼‰
           listen 80 default_server;
           listen [::]:80 default_server;

           # ç¶²ç«™æª”æ¡ˆçš„ä½ç½®ï¼ˆæ”¹æˆä½ çš„è³‡æ–™å¤¾è·¯å¾‘ï¼‰
           root /home/pi/my-website;
           
           # é¦–é æª”æ¡ˆåç¨±
           index index.html;

           # ç¶²åŸŸåç¨±ï¼ˆ_ è¡¨ç¤ºæ‰€æœ‰åŸŸåï¼‰
           server_name _;

           # è™•ç†æ‰€æœ‰è«‹æ±‚
           location / {
               # ä¾åºå°‹æ‰¾æª”æ¡ˆï¼Œæ‰¾ä¸åˆ°å°±é¡¯ç¤º 404
               try_files $uri $uri/ =404;
           }
       }
       ```

    **ğŸ’¡ ç°¡åŒ–ç‰ˆï¼ˆåˆå­¸è€…æ¨è–¦ï¼‰ï¼š**
    
    å¦‚æœä½ åªæƒ³å¿«é€Ÿè¨­å®šï¼Œåªéœ€è¦ä¿®æ”¹é€™å…©è¡Œï¼š
    ```nginx
    root /home/pi/my-website;    # æ”¹æˆä½ çš„è³‡æ–™å¤¾è·¯å¾‘
    index index.html;              # æ”¹æˆä½ çš„é¦–é æª”æ¡ˆåç¨±
    ```

### 3. è¨­å®šç¬¬äºŒå€‹ç¶²ç«™ï¼ˆç„¡åŸŸåï¼Œä½¿ç”¨ä¸åŒç«¯å£ï¼‰

> ğŸ’¡ **å­¸ç¿’ç›®æ¨™**ï¼šå­¸æœƒåœ¨åŒä¸€å°æ¨¹è“æ´¾ä¸Šé‹è¡Œå¤šå€‹ç¶²ç«™

å¦‚æœæ²’æœ‰ç¶²åŸŸåç¨±ï¼Œæƒ³è¦åœ¨åŒä¸€å°æ¨¹è“æ´¾ä¸Šé‹è¡Œå¤šå€‹ç¶²ç«™ï¼Œæœ€å¸¸è¦‹çš„æ–¹å¼æ˜¯**ä½¿ç”¨ä¸åŒçš„ç«¯å£**ã€‚ä¾‹å¦‚ï¼š
- ç¬¬ä¸€å€‹ç¶²ç«™ä½¿ç”¨ç«¯å£ 80ï¼ˆé è¨­ HTTP ç«¯å£ï¼‰ï¼š`http://ä½ çš„IP`
- ç¬¬äºŒå€‹ç¶²ç«™ä½¿ç”¨ç«¯å£ 8080ï¼š`http://ä½ çš„IP:8080`

**å¯¦éš›æ“ä½œæ­¥é©Ÿï¼š**

1. **å»ºç«‹ç¬¬äºŒå€‹ç¶²ç«™çš„è³‡æ–™å¤¾ä¸¦æ”¾å…¥æª”æ¡ˆ**ï¼š
```bash
# å»ºç«‹è³‡æ–™å¤¾
mkdir -p /home/pi/projects/my-second-website

# å»ºç«‹ä¸€å€‹ç°¡å–®çš„æ¸¬è©¦ç¶²é 
sudo nano /home/pi/projects/my-second-website/index.html
```

è¼¸å…¥ä»¥ä¸‹å…§å®¹ï¼š
```html
<!DOCTYPE html>
<html>
<head>
    <title>ç¬¬äºŒå€‹ç¶²ç«™</title>
    <style>
        body {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            text-align: center;
            padding: 50px;
            font-family: Arial, sans-serif;
        }
        h1 { font-size: 48px; }
    </style>
</head>
<body>
    <h1>ğŸ‰ é€™æ˜¯æˆ‘çš„ç¬¬äºŒå€‹ç¶²ç«™ï¼</h1>
    <p>ä½¿ç”¨ç«¯å£ 8080 è¨ªå•</p>
</body>
</html>
```

å„²å­˜ä¸¦é›¢é–‹ï¼ˆ`Ctrl+O`, `Enter`, `Ctrl+X`ï¼‰

2. **å»ºç«‹æ–°çš„ç«™é»è¨­å®šæª”**ï¼š
```bash
sudo nano /etc/nginx/sites-available/my-second-site
```

3. **åœ¨è¨­å®šæª”ä¸­è¼¸å…¥ä»¥ä¸‹å…§å®¹**ï¼š
```nginx
# server { } å€å¡Šï¼šå®šç¾©ç¬¬äºŒå€‹ç¶²ç«™
# æ³¨æ„ï¼šä½¿ç”¨ä¸åŒçš„ç«¯å£ï¼ˆ8080ï¼‰ï¼Œé€™æ¨£å°±ä¸æœƒèˆ‡é è¨­ç¶²ç«™ï¼ˆç«¯å£ 80ï¼‰è¡çª
server {
    
    # listen 8080ï¼šç›£è½ 8080 ç«¯å£
    # æ³¨æ„ï¼šæ²’æœ‰ default_serverï¼Œå› ç‚ºé€™æ˜¯ç¬¬äºŒå€‹ç¶²ç«™
    listen 8080;
    listen [::]:8080;

    # root æŒ‡ä»¤ï¼šæŒ‡å®šç¬¬äºŒå€‹ç¶²ç«™çš„æ ¹ç›®éŒ„è·¯å¾‘
    # é€™å€‹ç¶²ç«™çš„æ‰€æœ‰æª”æ¡ˆéƒ½å­˜æ”¾åœ¨ /home/pi/projects/my-second-website
    root /home/pi/projects/my-second-website;
    
    # index æŒ‡ä»¤ï¼šæŒ‡å®šé è¨­é¦–é æª”æ¡ˆ
    index index.html index.htm;

    # server_name ä½¿ç”¨ _ è¡¨ç¤ºåŒ¹é…æ‰€æœ‰åŸŸåï¼ˆå› ç‚ºæˆ‘å€‘ç”¨ç«¯å£å€åˆ†ç¶²ç«™ï¼‰
    server_name _;

    # location å€å¡Šï¼šè™•ç†æ‰€æœ‰ URL è«‹æ±‚
    location / {
        # try_files æŒ‡ä»¤ï¼šä¾åºå°‹æ‰¾æª”æ¡ˆ
        # $uriï¼šå…ˆå˜—è©¦ç›´æ¥å°æ‡‰çš„æª”æ¡ˆè·¯å¾‘
        # $uri/ï¼šå¦‚æœæ‰¾ä¸åˆ°ï¼Œç•¶ä½œç›®éŒ„è™•ç†ï¼Œå°‹æ‰¾ç›®éŒ„ä¸‹çš„é è¨­æª”æ¡ˆ
        # =404ï¼šéƒ½æ‰¾ä¸åˆ°å°±è¿”å› 404 éŒ¯èª¤
        try_files $uri $uri/ =404;
    }
}
```

4. **å•Ÿç”¨æ–°ç¶²ç«™**ï¼ˆå»ºç«‹ç¬¦è™Ÿé€£çµï¼‰ï¼š
```bash
# åœ¨ sites-enabled ç›®éŒ„ä¸­å»ºç«‹ç¬¦è™Ÿé€£çµ
sudo ln -s /etc/nginx/sites-available/my-second-site /etc/nginx/sites-enabled/
```

**ğŸ’¡ ç¬¦è™Ÿé€£çµæ˜¯ä»€éº¼ï¼Ÿ**
- å°±åƒ Windows çš„ã€Œæ·å¾‘ã€æˆ– macOS çš„ã€Œåˆ¥åã€
- è®“ Nginx çŸ¥é“è¦å•Ÿç”¨é€™å€‹ç¶²ç«™è¨­å®š

5. **æ¸¬è©¦è¨­å®šæª”èªæ³•**ï¼š
```bash
sudo nginx -t
```

**âœ… æˆåŠŸæ¨™èªŒï¼š** çœ‹åˆ° `syntax is ok` å’Œ `test is successful`

6. **é‡æ–°è¼‰å…¥ Nginx**ï¼š
```bash
sudo systemctl reload nginx
```

7. **é©—è­‰å…©å€‹ç¶²ç«™éƒ½æ­£å¸¸é‹ä½œ** âœ…

åœ¨ç€è¦½å™¨ä¸­æ¸¬è©¦ï¼š
- ç¬¬ä¸€å€‹ç¶²ç«™ï¼š`http://[ä½ çš„IP]`ï¼ˆç«¯å£ 80ï¼Œé è¨­ï¼‰
- ç¬¬äºŒå€‹ç¶²ç«™ï¼š`http://[ä½ çš„IP]:8080`ï¼ˆç«¯å£ 8080ï¼‰

**é©—è­‰æ¸…å–®ï¼š**
- [ ] ç¬¬ä¸€å€‹ç¶²ç«™å¯ä»¥æ­£å¸¸è¨ªå•
- [ ] ç¬¬äºŒå€‹ç¶²ç«™å¯ä»¥æ­£å¸¸è¨ªå•ï¼ˆæ³¨æ„è¦åŠ ä¸Š `:8080`ï¼‰
- [ ] å…©å€‹ç¶²ç«™é¡¯ç¤ºä¸åŒçš„å…§å®¹

**ğŸ“‹ å®Œæ•´ç¯„ä¾‹ï¼šå…©å€‹ç¶²ç«™çš„è¨­å®šæª”å°ç…§**

**é è¨­ç¶²ç«™ (`/etc/nginx/sites-available/default`)**ï¼š
```nginx
server {
    listen 80 default_server;
    listen [::]:80 default_server;
    root /home/pi/projects/my-first-website;
    index index.html;
    server_name _;
    
    location / {
        try_files $uri $uri/ =404;
    }
}
```

**ç¬¬äºŒå€‹ç¶²ç«™ (`/etc/nginx/sites-available/my-second-site`)**ï¼š
```nginx
server {
    listen 8080;                    # ä½¿ç”¨ä¸åŒçš„ç«¯å£
    listen [::]:8080;
    root /home/pi/projects/my-second-website;  # ä¸åŒçš„æ ¹ç›®éŒ„
    index index.html;
    server_name _;
    
    location / {
        try_files $uri $uri/ =404;
    }
}
```

**ğŸ’¡ è£œå……èªªæ˜**ï¼š

- **ç«¯å£é¸æ“‡**ï¼šå¯ä»¥é¸æ“‡ä»»ä½•æœªè¢«ä½¿ç”¨çš„ç«¯å£ï¼Œå¸¸è¦‹é¸æ“‡åŒ…æ‹¬ï¼š
  - `8080`ã€`8081`ã€`8082` ç­‰ï¼ˆå¸¸ç”¨æ–¼é–‹ç™¼ï¼‰
  - `3000`ã€`3001`ï¼ˆå¸¸ç”¨æ–¼ Node.js æ‡‰ç”¨ï¼‰
  - æ³¨æ„é¿å…ä½¿ç”¨ç³»çµ±ä¿ç•™ç«¯å£ï¼ˆ1-1023ï¼‰ï¼Œå»ºè­°ä½¿ç”¨ 1024 ä»¥ä¸Šçš„ç«¯å£

- **æŸ¥çœ‹ç•¶å‰ä½¿ç”¨çš„ç«¯å£**ï¼š
```bash
sudo netstat -tlnp | grep nginx
```

- **ç§»é™¤ç¶²ç«™**ï¼ˆå¦‚æœä¸éœ€è¦äº†ï¼‰ï¼š
```bash
# ç§»é™¤ç¬¦è™Ÿé€£çµï¼ˆåœç”¨ç¶²ç«™ï¼‰
sudo rm /etc/nginx/sites-enabled/my-second-site

# é‡æ–°è¼‰å…¥ Nginx
sudo systemctl reload nginx

# å¯é¸ï¼šåˆªé™¤è¨­å®šæª”ï¼ˆå¦‚æœç¢ºå®šä¸å†ä½¿ç”¨ï¼‰
sudo rm /etc/nginx/sites-available/my-second-site
```

### âš ï¸ å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ³•

#### å•é¡Œ 1ï¼š403 Forbidden éŒ¯èª¤

**åŸå› ï¼š** Nginx æ²’æœ‰æ¬Šé™è®€å–ä½ çš„æª”æ¡ˆ

**è§£æ±ºæ–¹æ³•ï¼š**
```bash
# è¨­å®šè³‡æ–™å¤¾æ¬Šé™ï¼ˆè®“å…¶ä»–äººå¯ä»¥è®€å–ï¼‰
chmod 755 /home/pi
chmod 755 /home/pi/my-website

# å¦‚æœé‚„æ˜¯ä¸è¡Œï¼Œè¨­å®šæª”æ¡ˆæ¬Šé™
chmod -R 755 /home/pi/my-website
```

#### å•é¡Œ 2ï¼šä¿®æ”¹è¨­å®šå¾Œç¶²ç«™æ²’æœ‰æ›´æ–°

**è§£æ±ºæ–¹æ³•ï¼š**
```bash
# 1. å…ˆæ¸¬è©¦è¨­å®šæª”èªæ³•
sudo nginx -t

# 2. å¦‚æœèªæ³•æ­£ç¢ºï¼Œé‡æ–°è¼‰å…¥ Nginx
sudo systemctl reload nginx

# 3. æ¸…é™¤ç€è¦½å™¨å¿«å–å¾Œé‡æ–°è¼‰å…¥ï¼ˆCtrl+Shift+R æˆ– Cmd+Shift+Rï¼‰
```

#### å•é¡Œ 3ï¼šç«¯å£å·²è¢«ä½”ç”¨

**æª¢æŸ¥æ–¹æ³•ï¼š**
```bash
# æŸ¥çœ‹å“ªäº›ç«¯å£æ­£åœ¨ä½¿ç”¨
sudo netstat -tlnp | grep :80
```

**è§£æ±ºæ–¹æ³•ï¼š**
- åœæ­¢ä½”ç”¨ç«¯å£çš„æœå‹™
- æˆ–ä½¿ç”¨å…¶ä»–ç«¯å£ï¼ˆå¦‚ 8080ã€3000 ç­‰ï¼‰

### ğŸ“ è¨­å®šæª”ä¿®æ”¹æª¢æŸ¥æ¸…å–®

æ¯æ¬¡ä¿®æ”¹è¨­å®šæª”å¾Œï¼Œè«‹ç¢ºèªï¼š

- [ ] ä½¿ç”¨ `sudo nginx -t` æ¸¬è©¦èªæ³•
- [ ] çœ‹åˆ° `syntax is ok` å’Œ `test is successful`
- [ ] ä½¿ç”¨ `sudo systemctl reload nginx` é‡æ–°è¼‰å…¥
- [ ] åœ¨ç€è¦½å™¨ä¸­æ¸¬è©¦ç¶²ç«™æ˜¯å¦æ­£å¸¸
- [ ] æª¢æŸ¥éŒ¯èª¤æ—¥èªŒï¼š`sudo tail -f /var/log/nginx/error.log`ï¼ˆå¦‚æœæœ‰å•é¡Œï¼‰

---

### é€²éšå»ºè­°

* **ä½¿ç”¨ FTP ä¸Šå‚³æª”æ¡ˆï¼š** å¦‚æœä½ æƒ³åœ¨é›»è…¦ä¸Šå¯«å¥½ä»£ç¢¼å†å‚³åˆ°æ¨¹è“æ´¾ï¼Œå»ºè­°å®‰è£ **FileZilla** ä¸¦é€é SFTPï¼ˆä½¿ç”¨æ¨¹è“æ´¾çš„å¸³è™Ÿå¯†ç¢¼ï¼‰é€£æ¥ï¼Œé€™æ¨£ç®¡ç†æª”æ¡ˆæœƒæ–¹ä¾¿å¾ˆå¤šã€‚
* **å›ºå®š IPï¼š** å»ºè­°åœ¨è·¯ç”±å™¨è¨­å®šä¸­å°‡æ¨¹è“æ´¾çš„ IP å›ºå®šï¼Œé€™æ¨£ä¸‹æ¬¡é–‹æ©Ÿæ™‚ç¶²å€æ‰ä¸æœƒè®Šå‹•ã€‚

ä½ éœ€è¦æˆ‘é€²ä¸€æ­¥èªªæ˜å¦‚ä½•å¾**å¤–éƒ¨ç¶²è·¯ï¼ˆå®¶ä»¥å¤–çš„åœ°æ–¹ï¼‰**é€£å›ä½ çš„æ¨¹è“æ´¾ä¼ºæœå™¨å—ï¼Ÿï¼ˆé€™é€šå¸¸æ¶‰åŠã€Œå…§ç¶²ç©¿é€ã€æˆ–ã€Œè™›æ“¬ä¼ºæœå™¨è¨­å®šã€ï¼‰