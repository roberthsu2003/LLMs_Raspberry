å°‡æ¨¹è“æ´¾ï¼ˆRaspberry Piï¼‰è®Šæˆä¸€å€‹ç°¡å–®çš„ Web Server æ˜¯ä¸€é …éå¸¸ç¶“å…¸ä¸”æœ‰è¶£çš„å¯¦ä½œã€‚è¦é¡¯ç¤ºç°¡å–®çš„ HTMLã€CSS å’Œ JavaScriptï¼Œæœ€æ¨è–¦ä¸”æœ€ç©©å®šçš„æ–¹å¼æ˜¯ä½¿ç”¨ **Apache** æˆ– **Nginx**ã€‚

ä½¿ç”¨ **Nginx** ä¾†æ¶è¨­web serverï¼Œå› ç‚ºå®ƒè¼•é‡ã€æ•ˆèƒ½é«˜ï¼Œéå¸¸é©åˆåœ¨æ¨¹è“æ´¾ä¸Šé‹è¡Œã€‚

---

## ä»€éº¼æ˜¯ Nginxï¼Ÿ

Nginx (ç™¼éŸ³ç‚º "Engine-X") æ˜¯ä¸€å€‹é«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†ä¼ºæœå™¨ã€‚å®ƒä»¥ã€Œäº‹ä»¶é©…å‹•ï¼ˆEvent-drivenï¼‰ã€çš„æ¶æ§‹èåï¼Œé€™æ„å‘³è‘—å®ƒå¯ä»¥ç”¨éå¸¸å°‘çš„è¨˜æ†¶é«”è³‡æºè™•ç†å¤§é‡çš„é€£ç·šï¼Œéå¸¸é©åˆç¡¬é«”è³‡æºæœ‰é™çš„æ¨¹è“æ´¾ã€‚

### æ ¸å¿ƒåŠŸèƒ½èˆ‡å„ªå‹¢
1.  **é«˜ä½µç™¼è™•ç†**ï¼šç›¸æ¯”å‚³çµ±çš„ Apacheï¼ŒNginx åœ¨è™•ç†å¤§é‡åŒæ™‚é€£ç·šæ™‚è¡¨ç¾æ›´å„ªç•°ã€‚
2.  **åå‘ä»£ç† (Reverse Proxy)**ï¼šå¯ä»¥ä½œç‚ºå‰ç«¯ä¼ºæœå™¨ï¼Œå°‡æµé‡è½‰ç™¼çµ¦å¾Œç«¯çš„æ‡‰ç”¨ç¨‹å¼ï¼ˆå¦‚ Node.js, Python Flask/Djangoï¼‰ã€‚
3.  **è² è¼‰å‡è¡¡ (Load Balancing)**ï¼šå¦‚æœæœ‰æœå‹™é›†ç¾¤ï¼ŒNginx å¯ä»¥å”åŠ©åˆ†é…æµé‡ã€‚
4.  **éœæ…‹æª”æ¡ˆæœå‹™**ï¼šè™•ç†åœ–ç‰‡ã€CSSã€JS ç­‰éœæ…‹æª”æ¡ˆçš„é€Ÿåº¦æ¥µå¿«ã€‚

---

---

### ç¬¬ä¸€æ­¥ï¼šæ›´æ–°ç³»çµ±

åœ¨é–‹å§‹å®‰è£ä»»ä½•è»Ÿé«”ä¹‹å‰ï¼Œè«‹å…ˆç¢ºä¿ä½ çš„æ¨¹è“æ´¾ç³»çµ±æ˜¯æœ€æ–°çš„ã€‚æ‰“é–‹çµ‚ç«¯æ©Ÿï¼ˆTerminalï¼‰ä¸¦è¼¸å…¥ï¼š

```bash
sudo apt update
sudo apt upgrade -y

```

### ç¬¬äºŒæ­¥ï¼šå®‰è£ Nginx

Nginx æ˜¯ä¸€å€‹é«˜æ•ˆèƒ½çš„ HTTP ä¼ºæœå™¨ï¼Œå®‰è£æŒ‡ä»¤å¦‚ä¸‹ï¼š

```bash
sudo apt install nginx -y

```

å®‰è£å®Œæˆå¾Œï¼Œä¼ºæœå™¨æœƒè‡ªå‹•å•Ÿå‹•ã€‚

### ç¬¬ä¸‰æ­¥ï¼šæ¸¬è©¦ä¼ºæœå™¨æ˜¯å¦é‹è¡Œ

ä½ å¯ä»¥å¾åŒä¸€å€‹å€åŸŸç¶²è·¯ï¼ˆWi-Fiï¼‰ä¸‹çš„å¦ä¸€å°é›»è…¦æˆ–æ‰‹æ©Ÿï¼Œåœ¨ç€è¦½å™¨ç¶²å€åˆ—è¼¸å…¥**æ¨¹è“æ´¾çš„ IP ä½å€**ã€‚

> **å¦‚ä½•æŸ¥çœ‹ IPï¼Ÿ** åœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ `hostname -I`ã€‚

å¦‚æœä½ çœ‹åˆ°ã€ŒWelcome to nginx!ã€çš„ç•«é¢ï¼Œä»£è¡¨ä½ çš„ä¼ºæœå™¨å·²ç¶“æˆåŠŸä¸Šç·šäº†ï¼

---

### ç¬¬å››æ­¥ï¼šæ”¾ç½®ä½ çš„ HTMLã€CSS å’Œ JS æª”æ¡ˆ

Nginx é è¨­å­˜æ”¾ç¶²é æª”æ¡ˆçš„è·¯å¾‘æ˜¯ `/var/www/html`ã€‚

1. **é€²å…¥è©²ç›®éŒ„ï¼š**
```bash
cd /var/www/html

```


2. **å»ºç«‹ä½ çš„ç¶²é æª”æ¡ˆï¼š**
ä½ å¯ä»¥åˆªé™¤é è¨­çš„ `index.nginx-debian.html`ï¼Œä¸¦å»ºç«‹è‡ªå·±çš„ `index.html`ã€‚
```bash
sudo rm index.nginx-debian.html
sudo nano index.html

```


3. **è¼¸å…¥ç°¡å–®çš„ç¯„ä¾‹ä»£ç¢¼ï¼š**
åœ¨ç·¨è¼¯å™¨ä¸­è²¼ä¸Šé€™æ®µç°¡å–®çš„ç¨‹å¼ç¢¼ï¼š
```html
<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: sans-serif; text-align: center; background-color: #f4f4f4; }
        h1 { color: #333; }
    </style>
</head>
<body>
    <h1>æˆ‘çš„æ¨¹è“æ´¾ä¼ºæœå™¨</h1>
    <p id="demo">é€™æ˜¯ä¸€å€‹ç°¡å–®çš„ç¶²é ã€‚</p>
    <button onclick="changeText()">é»æˆ‘è©¦è©¦ JS</button>

    <script>
        function changeText() {
            document.getElementById("demo").innerHTML = "JavaScript é‹ä½œæ­£å¸¸ï¼";
        }
    </script>
</body>
</html>

```


*æŒ‰ä¸‹ `Ctrl + O` å­˜æª”ï¼Œ`Ctrl + X` é›¢é–‹ã€‚*

---

### ç¬¬äº”æ­¥ï¼šç€è¦½å™¨é‡æ–°è¼‰å…¥

ç¾åœ¨å›åˆ°ä½ çš„ç€è¦½å™¨ä¸¦é‡æ–°è¼‰å…¥é é¢ï¼Œä½ å°±èƒ½çœ‹åˆ°ä½ è‡ªå·±å¯«çš„ HTML å…§å®¹ï¼Œä¸¦ä¸”é»æ“ŠæŒ‰éˆ•ä¹Ÿèƒ½è§¸ç™¼ JavaScript æ•ˆæœäº†ã€‚

### nginxçš„æ§åˆ¶æŒ‡ä»¤

```bash
sudo systemctl restart nginx #é‡æ–°å•Ÿå‹•nginx
sudo systemctl stop nginx #åœæ­¢nginx
sudo systemctl start nginx #å•Ÿå‹•nginx
sudo systemctl status nginx #æŸ¥çœ‹nginxç‹€æ…‹
sudo systemctl reload nginx #é‡æ–°è¼‰å…¥nginx
```

---

## Nginx è¨­å®šæª”çµæ§‹èªªæ˜æ›¸

Nginx çš„å¼·å¤§ä¾†è‡ªæ–¼å…¶éˆæ´»çš„è¨­å®šæª”ã€‚äº†è§£å…¶çµæ§‹å°æœªä¾†é€²è¡Œé€²éšè¨­å®šï¼ˆå¦‚ç¶å®šç¶²åŸŸã€HTTPSï¼‰éå¸¸é‡è¦ã€‚

### ä¸»è¦è¨­å®šæª”ä½ç½®
*   **ä¸»è¨­å®šæª”**ï¼š`/etc/nginx/nginx.conf` (å…¨åŸŸè¨­å®š)
*   **ç«™é»è¨­å®šæª”**ï¼š`/etc/nginx/sites-available/` (å­˜æ”¾æ‰€æœ‰è¨­å®š) èˆ‡ `/etc/nginx/sites-enabled/` (å­˜æ”¾å·²å•Ÿç”¨è¨­å®š)

### è¨­å®šæª”å±¤ç´šçµæ§‹ (`nginx.conf`)
Nginx è¨­å®šæª”ç”±ã€Œå€å¡Š (Block)ã€çµ„æˆï¼Œå±¤ç´šå¦‚ä¸‹ï¼š

```nginx
# å…¨åŸŸå€å¡Š (Global Block)ï¼šè¨­å®š user, worker_processes ç­‰
user www-data;
worker_processes auto;

events {
    # events å€å¡Šï¼šè¨­å®šæœ€å¤§é€£ç·šæ•¸
    worker_connections 768;
}

http {
    # http å€å¡Šï¼šè¨­å®š web ç›¸é—œåƒæ•¸ï¼Œå¦‚ mime types, log format
    
    server {
        # server å€å¡Šï¼šå®šç¾©ä¸€å€‹è™›æ“¬ä¸»æ©Ÿ (Virtual Host)
        listen 80;
        server_name example.com; # ç¶²åŸŸåç¨±

        location / {
            # location å€å¡Šï¼šURL åŒ¹é…è¦å‰‡
            root /var/www/html;
            index index.html;
        }

        location /api {
            # åå‘ä»£ç†ç¯„ä¾‹
            proxy_pass http://localhost:3000;
        }
    }
}
```

### å¸¸ç”¨æŒ‡ä»¤é€ŸæŸ¥
| æŒ‡ä»¤ | èªªæ˜ | ç¯„ä¾‹ |
| :--- | :--- | :--- |
| `worker_processes` | å·¥ä½œé€²ç¨‹æ•¸ï¼Œé€šå¸¸è¨­ç‚º `auto` (èˆ‡ CPU æ ¸å¿ƒæ•¸ç›¸åŒ) | `worker_processes auto;` |
| `listen` | ç›£è½çš„ç«¯å£ (Port) | `listen 80;` |
| `server_name` | è©²ç«™é»ç¶å®šçš„ç¶²åŸŸåç¨± | `server_name mypi.local;` |
| `root` | éœæ…‹æª”æ¡ˆçš„æ ¹ç›®éŒ„è·¯å¾‘ | `root /var/www/my-site;` |
| `index` | é è¨­é¦–é æª”æ¡ˆåç¨± | `index index.html;` |
| `proxy_pass` | å°‡è«‹æ±‚è½‰ç™¼çµ¦å…¶ä»–ä¼ºæœå™¨ (åå‘ä»£ç†) | `proxy_pass http://127.0.0.1:5000;` |

---

## Nginx éœæ…‹ç¶²é éƒ¨ç½²è¨­å®šï¼šé è¨­ç›®éŒ„ vs è‡ªè¨‚ç›®éŒ„

åœ¨é…ç½® Nginx serving éœæ…‹æª”æ¡ˆæ™‚ï¼Œä¸»è¦æœ‰å…©ç¨®æª”æ¡ˆæ”¾ç½®ç­–ç•¥ï¼š

### 1. ä½¿ç”¨é è¨­ç›®éŒ„ (Default Directory)
Nginx å®‰è£å¾Œæœƒé è¨­ä¸€å€‹ç¶²é æ ¹ç›®éŒ„ï¼Œé€šå¸¸ä½æ–¼ `/var/www/html`ã€‚

*   **ç‰¹é»**ï¼š
    *   **å¿«é€Ÿä¸Šæ‰‹**ï¼šç„¡éœ€ä¿®æ”¹ Nginx çš„ä¸»è¦è¨­å®šæª”ï¼Œæœå‹™å•Ÿå‹•å³å¯çœ‹åˆ°å…§å®¹ã€‚
    *   **çµæ§‹å–®ç´”**ï¼šé©åˆå–®ä¸€å°ˆæ¡ˆæˆ–æ˜¯å‰›é–‹å§‹å­¸ç¿’ä¼ºæœå™¨éƒ¨ç½²æ™‚ä½¿ç”¨ã€‚
*   **æ“ä½œæ–¹å¼**ï¼šå¦‚ä¸Šè¿°ã€Œç¬¬å››æ­¥ã€æ‰€ç¤ºï¼Œç›´æ¥å°‡æª”æ¡ˆæ”¾å…¥ `/var/www/html` å³å¯ã€‚

### 2. ä½¿ç”¨è‡ªè¨‚ç›®éŒ„ (Custom Directory)
å¯¦éš›é–‹ç™¼ä¸­ï¼Œæˆ‘å€‘é€šå¸¸æœƒå¸Œæœ›å°‡ç¶²ç«™æª”æ¡ˆæ”¾åœ¨è‡ªå·±è¦åŠƒçš„å°ˆæ¡ˆè·¯å¾‘ä¸‹ï¼ˆä¾‹å¦‚ `/home/pi/projects/my-web`ï¼‰ï¼Œè€Œä¸æ˜¯ç³»çµ±é è¨­è·¯å¾‘ã€‚

*   **ç‰¹é»**ï¼š
    *   **ç®¡ç†éˆæ´»**ï¼šå¯ä»¥å°‡ä¸åŒå°ˆæ¡ˆåˆ†é–‹ç®¡ç†ï¼Œä¾¿æ–¼ç‰ˆæœ¬æ§åˆ¶ï¼ˆGitï¼‰èˆ‡å‚™ä»½ã€‚
    *   **å¤šç«™é»æ”¯æ´**ï¼šé€éè¨­å®šä¸åŒçš„ `server` blockï¼Œå¯ä»¥åœ¨åŒä¸€å°ä¼ºæœå™¨ä¸ŠåŒæ™‚é‹è¡Œå¤šå€‹ç¶²ç«™ã€‚

*   **Nginx è¨­å®šæª”æ¶æ§‹èªªæ˜**ï¼š
    
    åœ¨äº†è§£å¦‚ä½•ä¿®æ”¹è¨­å®šä¹‹å‰ï¼Œå…ˆèªè­˜ Nginx çš„å…©ç¨®è¨­å®šæª”é¡å‹ï¼š

    **ğŸ¯ ä¸»è¨­å®šæª” (`/etc/nginx/nginx.conf`)**ï¼š
    - **æ¯”å–»**ï¼šå°±åƒä¸€é–“é¤å»³çš„ã€Œç¸½ç®¡ç†è¦å‰‡æ‰‹å†Šã€ï¼Œå®šç¾©æ•´é–“é¤å»³çš„é‹ä½œåŸå‰‡
    - **åŠŸèƒ½**ï¼šè¨­å®š Nginx çš„å…¨åŸŸåƒæ•¸ï¼Œä¾‹å¦‚ï¼š
        - å·¥ä½œé€²ç¨‹æ•¸é‡ï¼ˆ`worker_processes`ï¼‰
        - è¨˜éŒ„æª”ä½ç½®ï¼ˆ`error_log`ã€`access_log`ï¼‰
        - ç³»çµ±å±¤ç´šçš„è¨­å®š
    - **ç‰¹é»**ï¼šé€šå¸¸ä¸éœ€è¦é »ç¹ä¿®æ”¹ï¼Œé™¤éè¦èª¿æ•´ä¼ºæœå™¨æ•ˆèƒ½æˆ–é€²éšåŠŸèƒ½
    - **æƒ…å¢ƒ**ï¼šå°±åƒé¤å»³è¦å®šã€Œæ‰€æœ‰å“¡å·¥éƒ½è¦éµå®ˆè¡›ç”Ÿæ¨™æº–ã€ã€ã€Œæ¯æ¡Œæœå‹™æ™‚é–“ä¸è¶…é30åˆ†é˜ã€é€™é¡å…¨é¤å»³é€šç”¨çš„è¦å‰‡

    **ğŸ“‹ ç«™é»è¨­å®šæª” (`/etc/nginx/sites-available/` ç›®éŒ„ä¸‹çš„æª”æ¡ˆ)**ï¼š
    - **æ¯”å–»**ï¼šå°±åƒæ¯å€‹ã€Œåˆ†åº—çš„ç‡Ÿé‹æ‰‹å†Šã€ï¼Œå®šç¾©æ¯å€‹ç¶²ç«™çš„å…·é«”é‹ä½œæ–¹å¼
    - **åŠŸèƒ½**ï¼šè¨­å®šç‰¹å®šç¶²ç«™çš„åƒæ•¸ï¼Œä¾‹å¦‚ï¼š
        - ç¶²ç«™æª”æ¡ˆçš„ä½ç½®ï¼ˆ`root`ï¼‰
        - ç›£è½çš„ç«¯å£ï¼ˆ`listen`ï¼‰
        - ç¶²åŸŸåç¨±ï¼ˆ`server_name`ï¼‰
        - ç¶²ç«™çš„è™•ç†è¦å‰‡ï¼ˆ`location` blocksï¼‰
    - **ç‰¹é»**ï¼šæ¯å€‹ç¶²ç«™å¯ä»¥æœ‰ç¨ç«‹çš„è¨­å®šæª”ï¼Œä¾¿æ–¼ç®¡ç†å¤šå€‹ç¶²ç«™
    - **æƒ…å¢ƒ**ï¼šå°±åƒ A åˆ†åº—è¦å®šã€Œæˆ‘å€‘çš„æ‹›ç‰Œèœå–®åœ¨é€™å€‹æ–‡ä»¶å¤¾è£¡ã€ã€ã€Œé¡§å®¢å¾80è™Ÿé–€é€²å…¥ã€ï¼Œè€Œ B åˆ†åº—å¯èƒ½æœ‰ä¸åŒçš„è¦å‰‡
    
    **ğŸ“‚ æª”æ¡ˆçµæ§‹**ï¼š
    ```
    /etc/nginx/
    â”œâ”€â”€ nginx.conf                    # ä¸»è¨­å®šæª”ï¼ˆç¸½è¦å‰‡ï¼‰
    â”œâ”€â”€ sites-available/              # å¯ç”¨çš„ç«™é»è¨­å®šæª”ï¼ˆæ‰€æœ‰åˆ†åº—æ‰‹å†Šï¼‰
    â”‚   â”œâ”€â”€ default                   # é è¨­ç«™é»ï¼ˆä¸»è¦åˆ†åº—ï¼‰
    â”‚   â””â”€â”€ my-website                # è‡ªè¨‚ç«™é»ï¼ˆå¦ä¸€é–“åˆ†åº—ï¼‰
    â””â”€â”€ sites-enabled/                # å•Ÿç”¨çš„ç«™é»è¨­å®šæª”ï¼ˆæ­£åœ¨ç‡Ÿæ¥­çš„åˆ†åº—ï¼‰
        â””â”€â”€ default -> ../sites-available/default  # ç¬¦è™Ÿé€£çµ
    ```
    
    **ğŸ’¡ å·¥ä½œæµç¨‹**ï¼š
    1. åœ¨ `sites-available/` ä¸­å»ºç«‹æˆ–ç·¨è¼¯ç«™é»è¨­å®šæª”ï¼ˆå°±åƒå¯«å¥½åˆ†åº—æ‰‹å†Šï¼‰
    2. å»ºç«‹ç¬¦è™Ÿé€£çµåˆ° `sites-enabled/` ä¾†å•Ÿç”¨ç¶²ç«™ï¼ˆå°±åƒæŠŠåˆ†åº—æ‰‹å†Šæ”¾åˆ°ã€Œæ­£åœ¨ç‡Ÿæ¥­ã€è³‡æ–™å¤¾ï¼‰
    3. æ¸¬è©¦è¨­å®šï¼š`sudo nginx -t`ï¼ˆæª¢æŸ¥æ‰‹å†Šæœ‰æ²’æœ‰éŒ¯èª¤ï¼‰
    4. é‡æ–°è¼‰å…¥ï¼š`sudo systemctl reload nginx`ï¼ˆè®“æ–°è¦å‰‡ç”Ÿæ•ˆï¼‰

*   **é…ç½®ç¯„ä¾‹**ï¼š
    éœ€è¦ä¿®æ”¹ Nginx çš„ç«™é»è¨­å®šæª” (é€šå¸¸ä½æ–¼ `/etc/nginx/sites-available/default`)ï¼Œå°‡ `root` æŒ‡ä»¤æŒ‡å‘ä½ çš„è‡ªè¨‚è³‡æ–™å¤¾è·¯å¾‘ã€‚

    1. ç·¨è¼¯è¨­å®šæª”ï¼š
       `sudo nano /etc/nginx/sites-available/default`

    2. ä¿®æ”¹ `root` è·¯å¾‘ï¼š
       ```nginx
       # server { } å€å¡Šï¼šå®šç¾©ä¸€å€‹è™›æ“¬ä¼ºæœå™¨ï¼ˆç¶²ç«™ç«™é»ï¼‰
       # ä¸€å€‹ server å€å¡Šä»£è¡¨ä¸€å€‹ç¶²ç«™çš„è¨­å®šï¼Œå¯ä»¥æœ‰å¤šå€‹ server å€å¡Šä¾†é‹è¡Œå¤šå€‹ç¶²ç«™
       server {
           
           # listen æŒ‡ä»¤ï¼šæŒ‡å®š Nginx ç›£è½çš„ç«¯å£å’Œ IP åœ°å€
           # listen 80ï¼šç›£è½ IPv4 çš„ 80 ç«¯å£ï¼ˆHTTP æ¨™æº–ç«¯å£ï¼‰
           # default_serverï¼šå°‡æ­¤ server å€å¡Šè¨­ç‚ºé è¨­ç«™é»ï¼ˆç•¶è«‹æ±‚çš„åŸŸåä¸åŒ¹é…ä»»ä½•ç«™é»æ™‚ï¼Œä½¿ç”¨æ­¤ç«™é»ï¼‰
           listen 80 default_server;
           
           # listen [::]:80ï¼šç›£è½ IPv6 çš„ 80 ç«¯å£
           # [::] æ˜¯ IPv6 çš„ã€Œæ‰€æœ‰åœ°å€ã€è¡¨ç¤ºæ³•ï¼Œç­‰åŒæ–¼ IPv4 çš„ 0.0.0.0
           listen [::]:80 default_server;

           # root æŒ‡ä»¤ï¼šæŒ‡å®šç¶²ç«™æª”æ¡ˆçš„æ ¹ç›®éŒ„è·¯å¾‘
           # ç•¶ç”¨æˆ¶è¨ªå•ç¶²ç«™æ™‚ï¼ŒNginx æœƒåœ¨é€™å€‹ç›®éŒ„ä¸­å°‹æ‰¾å°æ‡‰çš„æª”æ¡ˆ
           # ä¾‹å¦‚ï¼šè¨ªå• http://ä½ çš„IP/index.htmlï¼ŒNginx æœƒåœ¨ /home/pi/my-website/index.html å°‹æ‰¾æª”æ¡ˆ
           root /home/pi/my-website; 
           
           # index æŒ‡ä»¤ï¼šæŒ‡å®šç•¶ç”¨æˆ¶è¨ªå•ç›®éŒ„ï¼ˆè€Œéå…·é«”æª”æ¡ˆï¼‰æ™‚ï¼Œé è¨­è¦è¼‰å…¥çš„æª”æ¡ˆåç¨±
           # Nginx æœƒæŒ‰ç…§é †åºå°‹æ‰¾é€™äº›æª”æ¡ˆï¼Œæ‰¾åˆ°ç¬¬ä¸€å€‹å­˜åœ¨çš„æª”æ¡ˆå°±ä½¿ç”¨å®ƒ
           # ä¾‹å¦‚ï¼šè¨ªå• http://ä½ çš„IP/ï¼Œæœƒä¾åºå°‹æ‰¾ index.htmlã€index.htmã€index.nginx-debian.html
           index index.html index.htm index.nginx-debian.html;

           # server_name æŒ‡ä»¤ï¼šæŒ‡å®šé€™å€‹ server å€å¡Šè¦å›æ‡‰çš„ç¶²åŸŸåç¨±
           # _ (åº•ç·š) è¡¨ç¤ºã€ŒåŒ¹é…æ‰€æœ‰åŸŸåã€æˆ–ã€Œä¸åŒ¹é…ä»»ä½•ç‰¹å®šåŸŸåã€
           # é€šå¸¸ç”¨åœ¨ default_server ä¸Šï¼Œä½œç‚ºé è¨­ç«™é»
           # å¦‚æœè¦ç¶å®šç‰¹å®šåŸŸåï¼Œå¯ä»¥æ”¹ç‚ºï¼šserver_name example.com www.example.com;
           server_name _;

           # location å€å¡Šï¼šå®šç¾©ç‰¹å®š URL è·¯å¾‘çš„è™•ç†è¦å‰‡
           # location / è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ä»¥ / é–‹é ­çš„ URLï¼ˆä¹Ÿå°±æ˜¯æ‰€æœ‰è«‹æ±‚ï¼‰
           location / {
               # try_files æŒ‡ä»¤ï¼šå˜—è©¦æŒ‰ç…§é †åºå°‹æ‰¾æª”æ¡ˆ
               # $uriï¼šå…ˆå˜—è©¦ç›´æ¥ä½¿ç”¨è«‹æ±‚çš„ URI ä½œç‚ºæª”æ¡ˆè·¯å¾‘
               # $uri/ï¼šå¦‚æœæ‰¾ä¸åˆ°æª”æ¡ˆï¼Œå˜—è©¦å°‡ URI ç•¶ä½œç›®éŒ„ï¼Œå°‹æ‰¾è©²ç›®éŒ„ä¸‹çš„é è¨­æª”æ¡ˆï¼ˆç”± index æŒ‡ä»¤æŒ‡å®šï¼‰
               # =404ï¼šå¦‚æœä»¥ä¸Šéƒ½æ‰¾ä¸åˆ°ï¼Œè¿”å› 404 éŒ¯èª¤
               # 
               # ç¯„ä¾‹æµç¨‹ï¼š
               # 1. ç”¨æˆ¶è¨ªå• http://ä½ çš„IP/about.html
               #    â†’ try_files å…ˆæ‰¾ /home/pi/my-website/about.html
               #    â†’ æ‰¾åˆ°å°±è¿”å›
               # 2. ç”¨æˆ¶è¨ªå• http://ä½ çš„IP/blog/
               #    â†’ try_files å…ˆæ‰¾ /home/pi/my-website/blog/ (ä½œç‚ºæª”æ¡ˆï¼Œæ‰¾ä¸åˆ°)
               #    â†’ å†æ‰¾ /home/pi/my-website/blog/ (ä½œç‚ºç›®éŒ„)
               #    â†’ åœ¨è©²ç›®éŒ„ä¸‹æ‰¾ index.htmlï¼ˆç”± index æŒ‡ä»¤æŒ‡å®šï¼‰
               #    â†’ æ‰¾åˆ°å°±è¿”å›
               # 3. ç”¨æˆ¶è¨ªå• http://ä½ çš„IP/not-exist.html
               #    â†’ éƒ½æ‰¾ä¸åˆ°ï¼Œè¿”å› 404 éŒ¯èª¤
               try_files $uri $uri/ =404;
           }
       }
       ```

### 3. è¨­å®šç¬¬äºŒå€‹ç¶²ç«™ï¼ˆç„¡åŸŸåï¼Œä½¿ç”¨ä¸åŒç«¯å£ï¼‰

å¦‚æœæ²’æœ‰ç¶²åŸŸåç¨±ï¼Œæƒ³è¦åœ¨åŒä¸€å°æ¨¹è“æ´¾ä¸Šé‹è¡Œå¤šå€‹ç¶²ç«™ï¼Œæœ€å¸¸è¦‹çš„æ–¹å¼æ˜¯**ä½¿ç”¨ä¸åŒçš„ç«¯å£**ã€‚ä¾‹å¦‚ï¼š
- ç¬¬ä¸€å€‹ç¶²ç«™ä½¿ç”¨ç«¯å£ 80ï¼ˆé è¨­ HTTP ç«¯å£ï¼‰ï¼š`http://ä½ çš„IP`
- ç¬¬äºŒå€‹ç¶²ç«™ä½¿ç”¨ç«¯å£ 8080ï¼š`http://ä½ çš„IP:8080`

**æ­¥é©Ÿèªªæ˜ï¼š**

1. **å»ºç«‹ç¬¬äºŒå€‹ç¶²ç«™çš„è³‡æ–™å¤¾**ï¼š
```bash
mkdir -p /home/pi/projects/my-second-website
# æ”¾å…¥ä½ çš„ç¶²ç«™æª”æ¡ˆï¼ˆä¾‹å¦‚ index.htmlï¼‰
```

2. **å»ºç«‹æ–°çš„ç«™é»è¨­å®šæª”**ï¼š
```bash
sudo nano /etc/nginx/sites-available/my-second-site
```

3. **åœ¨è¨­å®šæª”ä¸­è¼¸å…¥ä»¥ä¸‹å…§å®¹**ï¼š
```nginx
# server { } å€å¡Šï¼šå®šç¾©ç¬¬äºŒå€‹ç¶²ç«™
# æ³¨æ„ï¼šä½¿ç”¨ä¸åŒçš„ç«¯å£ï¼ˆ8080ï¼‰ï¼Œé€™æ¨£å°±ä¸æœƒèˆ‡é è¨­ç¶²ç«™ï¼ˆç«¯å£ 80ï¼‰è¡çª
server {
    
    # listen 8080ï¼šç›£è½ 8080 ç«¯å£
    # æ³¨æ„ï¼šæ²’æœ‰ default_serverï¼Œå› ç‚ºé€™æ˜¯ç¬¬äºŒå€‹ç¶²ç«™
    listen 8080;
    listen [::]:8080;

    # root æŒ‡ä»¤ï¼šæŒ‡å®šç¬¬äºŒå€‹ç¶²ç«™çš„æ ¹ç›®éŒ„è·¯å¾‘
    # é€™å€‹ç¶²ç«™çš„æ‰€æœ‰æª”æ¡ˆéƒ½å­˜æ”¾åœ¨ /home/pi/projects/my-second-website
    root /home/pi/projects/my-second-website;
    
    # index æŒ‡ä»¤ï¼šæŒ‡å®šé è¨­é¦–é æª”æ¡ˆ
    index index.html index.htm;

    # server_name ä½¿ç”¨ _ è¡¨ç¤ºåŒ¹é…æ‰€æœ‰åŸŸåï¼ˆå› ç‚ºæˆ‘å€‘ç”¨ç«¯å£å€åˆ†ç¶²ç«™ï¼‰
    server_name _;

    # location å€å¡Šï¼šè™•ç†æ‰€æœ‰ URL è«‹æ±‚
    location / {
        # try_files æŒ‡ä»¤ï¼šä¾åºå°‹æ‰¾æª”æ¡ˆ
        # $uriï¼šå…ˆå˜—è©¦ç›´æ¥å°æ‡‰çš„æª”æ¡ˆè·¯å¾‘
        # $uri/ï¼šå¦‚æœæ‰¾ä¸åˆ°ï¼Œç•¶ä½œç›®éŒ„è™•ç†ï¼Œå°‹æ‰¾ç›®éŒ„ä¸‹çš„é è¨­æª”æ¡ˆ
        # =404ï¼šéƒ½æ‰¾ä¸åˆ°å°±è¿”å› 404 éŒ¯èª¤
        try_files $uri $uri/ =404;
    }
}
```

4. **å•Ÿç”¨æ–°ç¶²ç«™**ï¼ˆå»ºç«‹ç¬¦è™Ÿé€£çµï¼‰ï¼š
```bash
# åœ¨ sites-enabled ç›®éŒ„ä¸­å»ºç«‹ç¬¦è™Ÿé€£çµï¼ŒæŒ‡å‘ sites-available ä¸­çš„è¨­å®šæª”
sudo ln -s /etc/nginx/sites-available/my-second-site /etc/nginx/sites-enabled/
```

5. **æ¸¬è©¦è¨­å®šæª”èªæ³•**ï¼š
```bash
sudo nginx -t
```
å¦‚æœé¡¯ç¤º `syntax is ok` å’Œ `test is successful`ï¼Œè¡¨ç¤ºè¨­å®šæª”æ²’æœ‰éŒ¯èª¤ã€‚

6. **é‡æ–°è¼‰å…¥ Nginx**ï¼š
```bash
sudo systemctl reload nginx
```

7. **æ¸¬è©¦è¨ªå•**ï¼š
- ç¬¬ä¸€å€‹ç¶²ç«™ï¼š`http://ä½ çš„IP`ï¼ˆç«¯å£ 80ï¼Œé è¨­ï¼‰
- ç¬¬äºŒå€‹ç¶²ç«™ï¼š`http://ä½ çš„IP:8080`ï¼ˆç«¯å£ 8080ï¼‰

**ğŸ“‹ å®Œæ•´ç¯„ä¾‹ï¼šå…©å€‹ç¶²ç«™çš„è¨­å®šæª”å°ç…§**

**é è¨­ç¶²ç«™ (`/etc/nginx/sites-available/default`)**ï¼š
```nginx
server {
    listen 80 default_server;
    listen [::]:80 default_server;
    root /home/pi/projects/my-first-website;
    index index.html;
    server_name _;
    
    location / {
        try_files $uri $uri/ =404;
    }
}
```

**ç¬¬äºŒå€‹ç¶²ç«™ (`/etc/nginx/sites-available/my-second-site`)**ï¼š
```nginx
server {
    listen 8080;                    # ä½¿ç”¨ä¸åŒçš„ç«¯å£
    listen [::]:8080;
    root /home/pi/projects/my-second-website;  # ä¸åŒçš„æ ¹ç›®éŒ„
    index index.html;
    server_name _;
    
    location / {
        try_files $uri $uri/ =404;
    }
}
```

**ğŸ’¡ è£œå……èªªæ˜**ï¼š

- **ç«¯å£é¸æ“‡**ï¼šå¯ä»¥é¸æ“‡ä»»ä½•æœªè¢«ä½¿ç”¨çš„ç«¯å£ï¼Œå¸¸è¦‹é¸æ“‡åŒ…æ‹¬ï¼š
  - `8080`ã€`8081`ã€`8082` ç­‰ï¼ˆå¸¸ç”¨æ–¼é–‹ç™¼ï¼‰
  - `3000`ã€`3001`ï¼ˆå¸¸ç”¨æ–¼ Node.js æ‡‰ç”¨ï¼‰
  - æ³¨æ„é¿å…ä½¿ç”¨ç³»çµ±ä¿ç•™ç«¯å£ï¼ˆ1-1023ï¼‰ï¼Œå»ºè­°ä½¿ç”¨ 1024 ä»¥ä¸Šçš„ç«¯å£

- **æŸ¥çœ‹ç•¶å‰ä½¿ç”¨çš„ç«¯å£**ï¼š
```bash
sudo netstat -tlnp | grep nginx
```

- **ç§»é™¤ç¶²ç«™**ï¼ˆå¦‚æœä¸éœ€è¦äº†ï¼‰ï¼š
```bash
# ç§»é™¤ç¬¦è™Ÿé€£çµï¼ˆåœç”¨ç¶²ç«™ï¼‰
sudo rm /etc/nginx/sites-enabled/my-second-site

# é‡æ–°è¼‰å…¥ Nginx
sudo systemctl reload nginx

# å¯é¸ï¼šåˆªé™¤è¨­å®šæª”ï¼ˆå¦‚æœç¢ºå®šä¸å†ä½¿ç”¨ï¼‰
sudo rm /etc/nginx/sites-available/my-second-site
```

### æ³¨æ„äº‹é …
*   **æª”æ¡ˆæ¬Šé™ (Permissions)**ï¼šä½¿ç”¨è‡ªè¨‚ç›®éŒ„æ™‚ï¼Œæœ€å¸¸é‡åˆ°çš„å•é¡Œæ˜¯ `403 Forbidden`ã€‚é€™é€šå¸¸æ˜¯å› ç‚º Nginx çš„åŸ·è¡Œä½¿ç”¨è€…ï¼ˆé€šå¸¸æ˜¯ `www-data`ï¼‰æ²’æœ‰æ¬Šé™è®€å–ä½ çš„ `home` ç›®éŒ„ã€‚
    *   **è§£æ±ºæ–¹å¼**ï¼šç¢ºä¿ä½ çš„å°ˆæ¡ˆè³‡æ–™å¤¾å’Œå…¶ä¸Šå±¤ç›®éŒ„å°å…¶ä»–ä½¿ç”¨è€…æœ‰è®€å–/åŸ·è¡Œæ¬Šé™ã€‚
    *   æŒ‡ä»¤ç¯„ä¾‹ï¼š`chmod 755 /home/pi`
*   **è¨­å®šç”Ÿæ•ˆ**ï¼šä¿®æ”¹è¨­å®šæª”å¾Œï¼Œå‹™å¿…æ¸¬è©¦èªæ³•ä¸¦é‡å•Ÿ Nginxï¼š
    *   `sudo nginx -t` (æª¢æŸ¥èªæ³•)
    *   `sudo systemctl reload nginx` (é‡å•Ÿ)

---

### é€²éšå»ºè­°

* **ä½¿ç”¨ FTP ä¸Šå‚³æª”æ¡ˆï¼š** å¦‚æœä½ æƒ³åœ¨é›»è…¦ä¸Šå¯«å¥½ä»£ç¢¼å†å‚³åˆ°æ¨¹è“æ´¾ï¼Œå»ºè­°å®‰è£ **FileZilla** ä¸¦é€é SFTPï¼ˆä½¿ç”¨æ¨¹è“æ´¾çš„å¸³è™Ÿå¯†ç¢¼ï¼‰é€£æ¥ï¼Œé€™æ¨£ç®¡ç†æª”æ¡ˆæœƒæ–¹ä¾¿å¾ˆå¤šã€‚
* **å›ºå®š IPï¼š** å»ºè­°åœ¨è·¯ç”±å™¨è¨­å®šä¸­å°‡æ¨¹è“æ´¾çš„ IP å›ºå®šï¼Œé€™æ¨£ä¸‹æ¬¡é–‹æ©Ÿæ™‚ç¶²å€æ‰ä¸æœƒè®Šå‹•ã€‚

ä½ éœ€è¦æˆ‘é€²ä¸€æ­¥èªªæ˜å¦‚ä½•å¾**å¤–éƒ¨ç¶²è·¯ï¼ˆå®¶ä»¥å¤–çš„åœ°æ–¹ï¼‰**é€£å›ä½ çš„æ¨¹è“æ´¾ä¼ºæœå™¨å—ï¼Ÿï¼ˆé€™é€šå¸¸æ¶‰åŠã€Œå…§ç¶²ç©¿é€ã€æˆ–ã€Œè™›æ“¬ä¼ºæœå™¨è¨­å®šã€ï¼‰