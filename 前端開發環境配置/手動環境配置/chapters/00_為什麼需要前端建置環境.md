# 第 0 章：為什麼需要前端建置環境

## 🎯 教學目標

完成本章後，你應該能夠：

- 理解「瀏覽器」與「開發環境」是兩個不同世界
- 知道前端建置環境的存在不是為了炫技，而是為了解決實際問題
- 建立「開發 → 建置 → 部署」的基本流程概念
- 理解為什麼不能只用 `<script>` 標籤

---

## 📖 核心觀念

### 瀏覽器 ≠ 開發環境

這是本章最重要的觀念：

> **瀏覽器是「執行環境」，開發環境是「生產工具」**

想像一下：
- **瀏覽器** = 餐廳（顧客用餐的地方）
- **開發環境** = 廚房（廚師準備食材、烹飪的地方）

顧客只會看到最終的料理，但廚師需要各種工具（刀具、爐具、調味料）來準備。

---

## 🤔 為什麼不能只用 `<script>`？

### 傳統方式的限制

假設你寫了一個簡單的網頁：

```html
<!DOCTYPE html>
<html>
<head>
    <title>我的網頁</title>
</head>
<body>
    <h1>Hello World</h1>
    <script>
        // 所有程式碼都寫在這裡
        function calculateTotal(price, tax) {
            return price * (1 + tax);
        }
        console.log(calculateTotal(100, 0.1));
    </script>
</body>
</html>
```

這樣可以運作，但當專案變大時會遇到問題：

#### 問題 1：程式碼組織困難

當你有 1000 行程式碼時，全部寫在一個 `<script>` 標籤裡會：
- 難以維護
- 難以找到特定功能
- 容易產生命名衝突

#### 問題 2：無法使用別人的程式碼

你想用一個現成的函式庫（例如處理日期的 moment.js），但：
- 無法直接 `import`
- 需要手動下載檔案
- 需要手動管理版本

#### 問題 3：無法使用新語法

你想用 ES6+ 的新語法（例如 `const`、`arrow function`、`class`），但：
- 舊瀏覽器不支援
- 需要手動轉換

#### 問題 4：開發體驗差

每次修改程式碼後：
- 需要手動重新整理瀏覽器
- 無法即時看到錯誤
- 無法使用除錯工具

---

## 🔧 瀏覽器能做什麼？不能做什麼？

### 瀏覽器「能」做的事

✅ **執行 JavaScript**：現代瀏覽器內建 JavaScript 引擎  
✅ **載入 HTML/CSS**：解析並渲染網頁  
✅ **ES Module**：現代瀏覽器支援 `import/export`  
✅ **執行 Web API**：DOM、Fetch、LocalStorage 等

### 瀏覽器「不能」做的事

❌ **執行 TypeScript**：瀏覽器不認識 `.ts` 檔案  
❌ **執行 JSX**：瀏覽器不認識 `<div>Hello</div>` 這種語法  
❌ **直接使用 npm 套件**：瀏覽器不認識 `node_modules`  
❌ **自動轉換語法**：不會把 ES6+ 轉成 ES5  
❌ **提供開發伺服器**：不會自動重新載入、熱更新  
❌ **打包程式碼**：不會把多個檔案合併成一個

---

## 🛠️ 為什麼會出現這些工具？

### npm（Node Package Manager）

**問題**：如何管理成千上萬的第三方套件？  
**解決**：npm 提供套件管理系統

```bash
npm install lodash
```

### Bundler（打包工具）

**問題**：如何把多個檔案、npm 套件打包成瀏覽器能用的檔案？  
**解決**：Webpack、Vite、Rollup 等工具

### Dev Server（開發伺服器）

**問題**：如何讓開發過程更順暢（自動重新載入、熱更新）？  
**解決**：Vite、Webpack Dev Server 等

### Build（建置工具）

**問題**：如何把開發環境的程式碼轉換成生產環境可用的程式碼？  
**解決**：TypeScript Compiler、Babel、打包工具等

---

## 🔄 開發 → 建置 → 部署

### 三個階段的關係

```
開發階段         建置階段         部署階段
   ↓              ↓              ↓
寫程式碼    →   轉換/打包    →   上傳到伺服器
(TypeScript)    (JavaScript)     (靜態檔案)
```

### 詳細流程

#### 1. 開發階段（Development）

- 你寫的程式碼：TypeScript、JSX、ES6+
- 使用的工具：編輯器、開發伺服器
- 目標：快速開發、即時預覽

#### 2. 建置階段（Build）

- 轉換：TypeScript → JavaScript、JSX → JavaScript
- 打包：多個檔案 → 少數幾個檔案
- 優化：壓縮、移除註解、Tree Shaking
- 目標：產生瀏覽器能執行的檔案

#### 3. 部署階段（Deployment）

- 上傳：把建置好的檔案上傳到伺服器
- 服務：透過 Nginx、Apache 等提供給使用者
- 目標：讓使用者能訪問你的網站

---

## 💡 生活化比喻

### 比喻 1：寫書

- **開發階段** = 用 Word 寫書（方便編輯、有拼字檢查）
- **建置階段** = 排版、印刷（轉換成 PDF、實體書）
- **部署階段** = 上架書店（讓讀者能買到）

### 比喻 2：做菜

- **開發階段** = 在廚房準備（各種食材、調味料）
- **建置階段** = 烹飪、擺盤（把食材變成料理）
- **部署階段** = 端上桌（讓顧客享用）

---

## ⚠️ 學生常見迷思

### ❌ 迷思 1：「前端就是寫 HTML + JS，不需要環境」

**事實**：簡單的網頁確實不需要，但現代前端專案幾乎都需要。

**為什麼**：
- 需要管理依賴套件（npm）
- 需要使用新語法（TypeScript、JSX）
- 需要優化效能（打包、壓縮）

### ❌ 迷思 2：「npm 是給瀏覽器用的」

**事實**：npm 是給開發者用的，瀏覽器根本不認識 npm。

**為什麼**：
- npm 在開發階段安裝套件到 `node_modules`
- 瀏覽器無法直接讀取 `node_modules`
- 需要打包工具把套件轉換成瀏覽器能用的格式

### ❌ 迷思 3：「build 就是把檔案壓縮而已」

**事實**：build 包含轉換、打包、優化等多個步驟。

**為什麼**：
- 轉換：TypeScript → JavaScript
- 打包：多個檔案 → 少數檔案
- 優化：壓縮、移除未使用程式碼
- 處理：處理圖片、CSS、字型等資源

### ❌ 迷思 4：「開發時能跑，部署一定能跑」

**事實**：不一定，因為開發環境和生產環境可能不同。

**為什麼**：
- 開發環境可能有開發伺服器的特殊處理
- 生產環境需要考慮瀏覽器相容性
- 路徑、資源載入方式可能不同

---

## 🎓 本章重點回顧

1. **瀏覽器 ≠ 開發環境**
   - 瀏覽器是執行環境
   - 開發環境是生產工具

2. **為什麼需要工具**
   - 程式碼組織
   - 使用第三方套件
   - 使用新語法
   - 改善開發體驗

3. **三個階段**
   - 開發：寫程式碼
   - 建置：轉換/打包
   - 部署：上傳到伺服器

---

## 🚀 下一章預告

在下一章，我們將從最簡單的環境開始：**純 JavaScript 的最小前端環境**。

你會學到：
- 現代瀏覽器已經能跑 ES Module
- 沒有任何工具時，前端可以做到哪些事
- 建立「原生做得到 vs 工具幫你做」的對照基準

👉 [前往第 1 章：純 JavaScript 最小環境](./01_純JavaScript最小環境.md)

---

## 💪 練習建議

1. **思考題**：列出你目前知道的前端工具，試著分類它們屬於哪個層次（語言、編譯、模組系統、開發工具、框架）

2. **實作題**：建立一個最簡單的 HTML 檔案，用 `<script>` 標籤寫 100 行 JavaScript，感受一下程式碼組織的困難

3. **研究題**：搜尋「前端工具鏈演進歷史」，了解為什麼會出現這些工具
